<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <link rel="alternate" href="/feed.xml" type="application/rss+xml" title="somewhere to talk about ideas and projects and stuff like everyone else">
    <link rel="stylesheet" href="/style/main.css">
    <title>#graphics</title>
  </head>
  <body>
    <div class="whitebox">
      <div class="graybar top">
        <header class="top">
          <div class="slogan">somewhere to talk about random ideas and projects like everyone else</div><a href="/">
            <h1 class="logo">
              stuff
               <span class="byline">by antimatter15</span>
            </h1></a>
        </header>
      </div>
      <div id="main">
        <div class="sidebar">
          <div class="about">
            <p class="emph">
              Hi. I’m <b>Kevin Kwok</b>, and I’m currently a junior at <b>MIT</b>, 
              and this is my obligatory online presence or whatever.  
            </p>
            <p>This is my little corner of the internet, where I talk about random projects and ideas and stuff. </p>
            <p>If you want to contact me or read obnoxiously nostalgic autobiographical trivia, check out the <a href="/about"> about </a>section.</p>
          </div><br>
          <section class="archive"><a href="/archive">
              <h2>Archive</h2></a>
            <ul>
              <li>
                <ul>
                  <li><a href="/2015/12"><span class="month">December</span> <span class="year">2015</span></a></li>
                  <li><a href="/2015/08"><span class="month">August</span> <span class="year">2015</span></a></li>
                  <li><a href="/2015/06"><span class="month">June</span> <span class="year">2015</span></a></li>
                  <li><a href="/2015/05"><span class="month">May</span> <span class="year">2015</span></a></li>
                  <li><a href="/2015/04"><span class="month">April</span> <span class="year">2015</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2014/12"><span class="month">December</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/07"><span class="month">July</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/06"><span class="month">June</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/05"><span class="month">May</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/04"><span class="month">April</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/03"><span class="month">March</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/02"><span class="month">February</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/01"><span class="month">January</span> <span class="year">2014</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2013/12"><span class="month">December</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/11"><span class="month">November</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/10"><span class="month">October</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/09"><span class="month">September</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/08"><span class="month">August</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/07"><span class="month">July</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/06"><span class="month">June</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/05"><span class="month">May</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/04"><span class="month">April</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/03"><span class="month">March</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/02"><span class="month">February</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/01"><span class="month">January</span> <span class="year">2013</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2012/12"><span class="month">December</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/11"><span class="month">November</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/10"><span class="month">October</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/09"><span class="month">September</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/08"><span class="month">August</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/07"><span class="month">July</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/06"><span class="month">June</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/05"><span class="month">May</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/04"><span class="month">April</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/03"><span class="month">March</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/02"><span class="month">February</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/01"><span class="month">January</span> <span class="year">2012</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2011/12"><span class="month">December</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/11"><span class="month">November</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/10"><span class="month">October</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/09"><span class="month">September</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/08"><span class="month">August</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/07"><span class="month">July</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/06"><span class="month">June</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/05"><span class="month">May</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/04"><span class="month">April</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/03"><span class="month">March</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/02"><span class="month">February</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/01"><span class="month">January</span> <span class="year">2011</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2010/12"><span class="month">December</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/11"><span class="month">November</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/10"><span class="month">October</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/09"><span class="month">September</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/08"><span class="month">August</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/07"><span class="month">July</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/06"><span class="month">June</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/05"><span class="month">May</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/04"><span class="month">April</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/03"><span class="month">March</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/02"><span class="month">February</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/01"><span class="month">January</span> <span class="year">2010</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2009/12"><span class="month">December</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/11"><span class="month">November</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/10"><span class="month">October</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/09"><span class="month">September</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/08"><span class="month">August</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/07"><span class="month">July</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/06"><span class="month">June</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/05"><span class="month">May</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/04"><span class="month">April</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/03"><span class="month">March</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/01"><span class="month">January</span> <span class="year">2009</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2008/12"><span class="month">December</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/11"><span class="month">November</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/10"><span class="month">October</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/09"><span class="month">September</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/08"><span class="month">August</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/07"><span class="month">July</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/06"><span class="month">June</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/05"><span class="month">May</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/04"><span class="month">April</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/01"><span class="month">January</span> <span class="year">2008</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2007/12"><span class="month">December</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/11"><span class="month">November</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/10"><span class="month">October</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/09"><span class="month">September</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/08"><span class="month">August</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/05"><span class="month">May</span> <span class="year">2007</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2006/09"><span class="month">September</span> <span class="year">2006</span></a></li>
                  <li><a href="/2006/08"><span class="month">August</span> <span class="year">2006</span></a></li>
                </ul><br>
              </li>
            </ul>
          </section>
          <div class="tags">
            <h2>Tags</h2><a href="/tag/3D" style="font-size: 13px">3D </a><a href="/tag/actionscript" style="font-size: 11px">actionscript </a><a href="/tag/ajax" style="font-size: 20px">ajax </a><a href="/tag/ajax animator" style="font-size: 20px">ajax animator </a><a href="/tag/api" style="font-size: 13px">api </a><a href="/tag/apple" style="font-size: 20px">apple </a><a href="/tag/arduino" style="font-size: 11px">arduino </a><a href="/tag/art" style="font-size: 13px">art </a><a href="/tag/awesome" style="font-size: 13px">awesome </a><a href="/tag/blog" style="font-size: 19px">blog </a><a href="/tag/browser" style="font-size: 20px">browser </a><a href="/tag/bugfix" style="font-size: 15px">bugfix </a><a href="/tag/canvas" style="font-size: 15px">canvas </a><a href="/tag/change" style="font-size: 15px">change </a><a href="/tag/chrome" style="font-size: 20px">chrome </a><a href="/tag/code" style="font-size: 13px">code </a><a href="/tag/color" style="font-size: 11px">color </a><a href="/tag/colors" style="font-size: 11px">colors </a><a href="/tag/css" style="font-size: 11px">css </a><a href="/tag/design" style="font-size: 20px">design </a><a href="/tag/doge" style="font-size: 11px">doge </a><a href="/tag/elitist" style="font-size: 20px">elitist </a><a href="/tag/evil" style="font-size: 19px">evil </a><a href="/tag/experiment" style="font-size: 15px">experiment </a><a href="/tag/export" style="font-size: 11px">export </a><a href="/tag/extension" style="font-size: 20px">extension </a><a href="/tag/ExtJS" style="font-size: 20px">ExtJS </a><a href="/tag/fast" style="font-size: 20px">fast </a><a href="/tag/features" style="font-size: 15px">features </a><a href="/tag/firefox" style="font-size: 20px">firefox </a><a href="/tag/flash" style="font-size: 17px">flash </a><a href="/tag/format" style="font-size: 11px">format </a><a href="/tag/function" style="font-size: 13px">function </a><a href="/tag/future" style="font-size: 15px">future </a><a href="/tag/GAE" style="font-size: 13px">GAE </a><a href="/tag/github" style="font-size: 15px">github </a><a href="/tag/google" style="font-size: 20px">google </a><a href="/tag/google code" style="font-size: 11px">google code </a><a href="/tag/google wave" style="font-size: 20px">google wave </a><a href="/tag/graphics" style="font-size: 17px">graphics </a><a href="/tag/hacking" style="font-size: 11px">hacking </a><a href="/tag/hardware" style="font-size: 11px">hardware </a><a href="/tag/hosting" style="font-size: 19px">hosting </a><a href="/tag/html5" style="font-size: 19px">html5 </a><a href="/tag/idea" style="font-size: 13px">idea </a><a href="/tag/image" style="font-size: 11px">image </a><a href="/tag/internet exploder" style="font-size: 20px">internet exploder </a><a href="/tag/ipad" style="font-size: 17px">ipad </a><a href="/tag/javascript" style="font-size: 20px">javascript </a><a href="/tag/json" style="font-size: 15px">json </a><a href="/tag/library" style="font-size: 11px">library </a><a href="/tag/light" style="font-size: 11px">light </a><a href="/tag/lines" style="font-size: 13px">lines </a><a href="/tag/linux" style="font-size: 17px">linux </a><a href="/tag/login" style="font-size: 15px">login </a><a href="/tag/magical" style="font-size: 15px">magical </a><a href="/tag/meta" style="font-size: 13px">meta </a><a href="/tag/microsoft" style="font-size: 15px">microsoft </a><a href="/tag/microwave" style="font-size: 15px">microwave </a><a href="/tag/mirror" style="font-size: 11px">mirror </a><a href="/tag/mit" style="font-size: 11px">mit </a><a href="/tag/multitouch" style="font-size: 13px">multitouch </a><a href="/tag/new" style="font-size: 19px">new </a><a href="/tag/nostalgia" style="font-size: 11px">nostalgia </a><a href="/tag/ocr" style="font-size: 13px">ocr </a><a href="/tag/offline" style="font-size: 17px">offline </a><a href="/tag/old" style="font-size: 17px">old </a><a href="/tag/onlypaths" style="font-size: 17px">onlypaths </a><a href="/tag/pi" style="font-size: 19px">pi </a><a href="/tag/progress" style="font-size: 11px">progress </a><a href="/tag/prototype" style="font-size: 13px">prototype </a><a href="/tag/python" style="font-size: 20px">python </a><a href="/tag/raphael" style="font-size: 19px">raphael </a><a href="/tag/release" style="font-size: 13px">release </a><a href="/tag/rewrite" style="font-size: 13px">rewrite </a><a href="/tag/school" style="font-size: 15px">school </a><a href="/tag/security" style="font-size: 15px">security </a><a href="/tag/shiny" style="font-size: 20px">shiny </a><a href="/tag/ShinyTouch" style="font-size: 13px">ShinyTouch </a><a href="/tag/simple" style="font-size: 11px">simple </a><a href="/tag/site" style="font-size: 13px">site </a><a href="/tag/small" style="font-size: 20px">small </a><a href="/tag/spam" style="font-size: 11px">spam </a><a href="/tag/speed" style="font-size: 11px">speed </a><a href="/tag/SVG" style="font-size: 15px">SVG </a><a href="/tag/touch" style="font-size: 13px">touch </a><a href="/tag/update" style="font-size: 20px">update </a><a href="/tag/upload" style="font-size: 17px">upload </a><a href="/tag/user interface" style="font-size: 11px">user interface </a><a href="/tag/vector" style="font-size: 13px">vector </a><a href="/tag/vectoreditor" style="font-size: 19px">vectoreditor </a><a href="/tag/version" style="font-size: 13px">version </a><a href="/tag/video" style="font-size: 15px">video </a><a href="/tag/vp8" style="font-size: 11px">vp8 </a><a href="/tag/vX JS" style="font-size: 19px">vX JS </a><a href="/tag/wave" style="font-size: 20px">wave </a><a href="/tag/webcam" style="font-size: 11px">webcam </a><a href="/tag/wikify" style="font-size: 20px">wikify </a><a href="/tag/wikipedia" style="font-size: 17px">wikipedia </a><a href="/tag/wordpress" style="font-size: 20px">wordpress </a>
          </div>
        </div>
        <div id="content">
          <h1>#graphics</h1>
          <article class="article intro">
            <header>
              <h2><a href="/2015/06/eulerian-video-magnification-in-the-browser/">Eulerian Video Magnification in the Browser</a> <span class="subtitle">30 June 2015</span></h2>
            </header>
            <section class="content"><p><div class="pic md" style="" ><img alt=""  src="/articles/2015/EVM/evm.png" ></div></p>
<p>Welcome to the exciting June edition of <em>Tales From The Backlog</em>. This particular entry is from two semesters ago, when I took <a href="http://6.869.csail.mit.edu/fall14/">6.819/6.869 Advances in Computer Vision</a> taught by Professor <a href="https://billf.mit.edu/">Bill Freeman</a> and <a href="http://web.mit.edu/torralba/www/">Antonio Torralba</a>. </p>
<p>For our final project, we had to reproduce some computer vision algorithm from a list. One of them was <a href="http://people.csail.mit.edu/mrub/vidmag/">Eulerian Video Magnification</a>, that cool demo which has made its rounds on Hacker News on several&nbsp;occasions. </p>

            </section>
          </article>
          <hr>
          <article class="article intro">
            <header>
              <h2><a href="/2014/12/protobowl-real-time-multiplayer-online-quizbowl/">Protobowl: Real-Time Multiplayer Online Quizbowl</a> <span class="subtitle">28 December 2014</span></h2>
            </header>
            <section class="content"><p><div class="pic md right" style="width: 300px" ><img alt=""  src="/articles/2014/Protobowl/protobowl-medium.jpg" ></div></p>
<p>I guess it’s a trivia site and I’m never actually going to legitimately finish this <span class="caps">README</span>, as it’s substantially over 3,000 words and I haven’t even finished the introduction to the prequel. I might as well distill the whole thing down to what actually matters— the little bits of trivia that really don’t matter but might be amusing to some people with particularly derranged senses of&nbsp;amusement.</p>
<ul>
<li><p>The official about page says that Protobowl is a portmanteau of “Prototype Quizbowl Application”, but this is in fact a lie. It is in fact and has always been an acronym for Promoting Racism Online To Obstruct Better Organized World Leadership. It was always designed to be nothing less than a <a href="http://www.qbwiki.com/wiki/index.php?title=Protobowl&amp;oldid=22538">“literal cancer of the quizbowl community”</a>.</p>
</li>
<li><p>Protobowl’s live-as-you-type real time chat was inspired by Google Wave, which Kevin is quite embarassed to have spent the first half of high school playing with, almost as embarrassed as he feels right now writing about himself in third&nbsp;person.</p>
</li>
<li><p>Protobowl was going to have a social component (called Socialbowl) so that users could log in and view their scores and detailed performance stats with graphs depicting buzz rates per category. Ben stopped working on it before it launched, so it was never&nbsp;added.</p>
</li>
<li><p>Protobowl runs primarily on Nodejitsu, but falls back to a Bitcable <span class="caps">VPS</span>, and then to an MIT XVM if all hell breaks loose. In late 2012, Ben and I had a bet over whether or not he would get into the Science Honor Society, and whoever lost would have to pay for the operational costs of Protobowl for the rest of time. He got accepted and lost the&nbsp;bet.</p>
</li>
<li><p>For a long time (and probably still today, albeit hopefully less so), Protobowl suffered from a mysterious lag problem that we could never quite figure out. In the process of debugging it, we instituted a bunch of voodoo superstitious policies under semi-credible conjectures. For the possibility that it might be due to increasing memory pressure due to a small memory leak, Protobowl restarts every day at 4am <span class="caps">EST</span> every day. The time was chosen because it represents the time of day with the fewest online&nbsp;users.</p>
</li>
<li><p>Protobowl has a built-in chat bot which is the remanant of a chat bot I had built in middle school for Omegle. It can be triggered by going into any empty room and saying (in chat) “I’m lonely”. It’s mostly reflective of the hornier, angstier and shallower side of online chat rooms, so it’s unlikely to pass a turing test (even if it decides to answer “asl” with “18 f&nbsp;uk”. </p>
</li>
<li><p>Protobowl was made using Twitter Bootstrap, which for quite a while was the blandest theme you could find on the internet because everyone who couldn’t design thought it looked beautiful. But now Bootstrap has itself become enamored with flat design, and Protobowl looks clean and original again with its soft gradients and gentle rounded&nbsp;corners. </p>
</li>
<li><p>Protobowl stores active rooms in-memory as simple Javascript objects. Inactive rooms are saved in a MongoDB database so that they can be unfrozen when requested. Questions are stored in an entirely separate MongoDB&nbsp;database. </p>
</li>
</ul>
<h2 id="version-3">Version&nbsp;3</h2>
<p>The current version of Protobowl which lies before you is the “third” version. By that, I mean these version numbers don’t mean much more than significant changes to the core of protobowl. Version 3 constituted more or less an entire rewrite to the codebase with specific attention paid to offline-first and abstracting away the socket layer. The result is something which is, at least architecturally, pretty cool. A rather large amount of code is shared between client and server, such that the transition between online and offline and back is super&nbsp;seamless.</p>
<h1 id="readme-anachronisms"><span class="caps">README</span> <span class="amp">&amp;</span>&nbsp;Anachronisms</h1>
<p>Okay, so I think <span class="caps">NPM</span> would complain if I didn’t have a readme, so I guess I’ll start writing something which might be mistaken for a readme given a certain number of prior conditions. As you might figure out in the “Prototype Quizbowl Application” section, the core of protobowl has evolved significantly during the life of this readme, and especially because I’m so insistent on writing pseudo-literary fluff in lieu of helpful concise manuals and bullets, there’s a good chance that the vast majority of the readme will be rife with anachronisms, statements that once were true, were falsified, returned to truthfulness and then fell into a stasis of&nbsp;untruth. </p>
<h1 id="manual">Manual</h1>
<p>Okay, so this application probably ranks among one of the largest things I’ve ever done, which actually does say something as to its scope. However, it’s still designed to be fast and responsive and what&nbsp;not.</p>
<p>But it’s got a somewhat large scope which makes me believe that it may be useful to have a sort of overview not of how things work (that’s what the code is for), but a somewhat deeper look into what it does. What kinds of features and little&nbsp;tricks.</p>
<h2 id="responsive-design">Responsive&nbsp;Design</h2>
<p>Yeah, yeah, buzzwords galore. It’s responsively designed which means that it should, at least in theory, work on all screen sizes, from gigantic monitor walls of 60 <span class="caps">HD</span> displays (I’ve only tested the application on six WXQGA monitors) to an iPhone screen (I won’t venture any smaller, because running on watches represents a significant effort beyond what I already&nbsp;have).</p>
<p>It’s been tested on a few browsers, Chrome (on Linux, Windows, iPad, Galaxy Nexus) and Firefox and Safari on&nbsp;iPad. </p>
<p>It’s built with Twitter Bootstrap, sans fugly black bar on top, so it should inherit most of the responsiveness. Also, it uses Font Awesome for all glyphs and that means everything’s vector and smooth even at absurd pixel&nbsp;densities.</p>
<h2 id="offline">Offline</h2>
<p>Protobowl was designed first with a flexible sync architecture. However, regrettably, it wasn’t designed with the idea of Offline-first. Don’t get me wrong, offline works great, but it’s implemented with a offline.coffee which is largely (I’d say 80%) a reimplementation of methods in web.coffee. That’s not a good quantity of don’t repeat yourself, or at least it’s hardly&nbsp;ideal.</p>
<p>However, by virtue of running off Node, there’s a single language (javascript) which runs both client and server. As such there’s a natural ability to reuse some code, in this case, all the supporting libraries are shared between client and server, the answer checking (which is surprisingly sophisticated, albeit likely unnecessarily&nbsp;so). </p>
<p>Offline was built with Appcache in mind, that’s pretty obvious because you sort of need appcache to make things work offline. The offline code is loaded asynchronously and there isn’t any fundamental difference between offline-start and disconnect behavior. So that means there isn’t any fumbling between multiple copies of the code or any limitation on the functionality of the offline mode. You can disconnect from the server in the midst of the game, perhaps because of a flaky connection and you can continue without interruption. And it even tries to automatically reconnect, and picks up the state and resumes (albeit, probably losing what you’ve done&nbsp;offline).</p>
<p>I have a sort of wordsy packrat syndrome, so I’ll leave all the text above untarnished, and state plainly that none of the words above are true, not anymore at least. Version 3 was a rewrite of the entire core of protobowl: client, server, heaven and earth. And to make the architecture more clean and gody, I endeavored to share code between client and server in a pretty cool&nbsp;way.</p>
<p>I don’t think this is meant to be a technical exposé of the artistic symmetries in the yet-unmade <span class="caps">UML</span> diagram of the universe, but I’ll talk about it a bit anyway, at least long enough for this document to hit the 3000 word&nbsp;mark. </p>
<h2 id="interface">Interface</h2>
<p>This is what I really think matters, how to actually use it, and the little interaction&nbsp;features.</p>
<h3 id="keyboard">Keyboard</h3>
<p>The primary interface is meant to be the keyboard. In fact, early design sketches didn’t even include a button bar for the desktop <span class="caps">UI</span>. Eventually, I relented, and there’s now buttons, but still, use&nbsp;keyboards.</p>
<p>The first button is <code>space</code>, which make sense because it’s the biggest button and also probably the most important. Space generally means “buzz”, however there’s another very small thing it does: when you open up and see that big green button saying “start the game”, you can also press space to trigger that (no ambiguity since the buzz button is disabled in such&nbsp;circumstances).</p>
<p>Next, or skipping, as it was referred to in earlier iterations, is also a fairly commonplace operation. It can be accessed with not one, but three keys, <code>S</code>, <code>N</code> and <code>J</code>. <code>S</code> and <code>N</code> are probably pretty obvious, referring to “Skip” and “Next”. J is just convenient because it’s on the home row (well, so is <code>S</code>, technically) and usually refers to “down” for people who use Vi or Vim, although it is commonplace for websites to respect <code>j</code> meaning up, and <code>k</code> meaning down. (See: Facebook, all Google products,&nbsp;etc.)</p>
<p>You can pause and resume with <code>P</code> and <code>R</code>. Both are equivalent, so you can technically pause with <code>R</code>, and resume with <code>P</code>, though that would be metaphorically&nbsp;confusing. </p>
<p>Since it’s designed to be “social”, if you don’t mind me tossing around more loaded buzzwords, chat was one of the first features added (also one of the easiest, but that doesn’t help me rewrite history). Chat is accessed through the <code>/</code> key, that is, the forward slash or by pressing enter while not buzzed. For those who don’t like letters which aren’t in the alphabet, it’s also accessible through the letter <code>C</code>.</p>
<h3 id="buttons">Buttons</h3>
<p>Yeah, buttons, they exist. But they’re only meant to be used on mobile. Seriously, use your&nbsp;keyboard.</p>
<h3 id="other-things-you-can-click-on">Other things you can click&nbsp;on</h3>
<p>There are a number of non-button things which can be clicked on as&nbsp;well.</p>
<h4 id="breadcrumbs">Breadcrumbs</h4>
<p>The “breadcrumb”, as Bootstrap calls it, is the little row which precedes every question which includes the category, difficulty and tournament to which the question belongs. The one on the top isn’t clickable, but all the other ones are. Clicking on those expands the question readout which gets collapsed below&nbsp;them.</p>
<p>Within the breadcrumb is a slightly grayed out word “Report”, which can be clicked on to bring up a (currently non-functional) modal dialog to submit a question for manual review in case there was something wrong with the question. For instance, maybe the question was formatted wrong or truncated, or you’re exceedingly pedantic and think that there is a typo which hinders your ability to participate, or&nbsp;something.</p>
<p>Also, on the far right is a blue star which can be clicked on to “bookmark” a question. Right now, bookmarking does little other than filling in that blue star and preventing the question from getting deleted (questions that drop far enough down get deleted unless they’re bookmarked). However, in the future, it may be imaginable that the bookmarked questions would be added to some kind of interface which could be managed by the&nbsp;server.</p>
<p>The breadcrumb also reveals the answer to the question whenever the question is&nbsp;over.</p>
<h4 id="leaderboard-statistics">Leaderboard/Statistics</h4>
<p>In multiplayer mode, there is a leaderboard showing a ranking of all the users who have participated in the room. In single player, it’s just a single grid giving your&nbsp;statistics.</p>
<h5 id="multiplayer">Multiplayer</h5>
<p>It’s a grid, which is pretty cool, the first row is the ranking and the score, the latter of which is inside a bubble which is colored. The score is at the moment computed based on the number of “early” answers, which are correct answers before the asterisk in applicable packets, the number of interrupts and the number of correct answers. The current weights are 15 for an early answer, 10 for a correct answer and -5 for an interrupt. The colors of the bubble denote the online status of the&nbsp;player:</p>
<ul>
<li><code>gray</code> the user is offline and has no connected sessions at that&nbsp;moment</li>
<li><code>orange</code> the user has not interacted with the game in the past 10 minutes, but has at least one session&nbsp;open</li>
<li><code>green</code> the user is online and has interacted with the room in the past 10&nbsp;minutes</li>
<li><code>blue</code> this row corresponds to&nbsp;you</li>
</ul>
<p>On the adjacent column is the user’s name and there is another column for the number of interrupts. There aren’t any more because there isn’t much&nbsp;space.</p>
<p>Clicking on any of the rows brings up a popover which gives a more complete breakdown of the user and his or her performance. That dialog can be dismissed by clicking (or tapping, for touch devices) again on the same&nbsp;row.</p>
<h5 id="single-player-offline">Single&nbsp;Player/Offline</h5>
<p>The single player mode has aesthetic similarities to the detailed popover of the multiplayer mode and this is hardly a coincidence. The default view for single player mode is just an abridged version of the popover’s view including only the score, the number correct, the number of interrupts and the total number of guesses. Clicking on the single player interface anywhere will reveal the more detailed interface (with purty sliding effects courtesy of&nbsp;jQuery).</p>
<p>On the single player header the “offline” badge lights up, well, quite obviously, when the user is&nbsp;offline.</p>
<p>It also has shiny transitions between single player and multiplayer&nbsp;modes.</p>
<h2 id="debugging">Debugging</h2>
<p>The debugging panel is the furthest down and takes the form of what looks like a table. The first two rows sound vaguely technical (with an underscore too!), latency and sync_offset. And you’d be right, they’re both just little metrics which go indicate the health of the network&nbsp;connection. </p>
<p>The titling of “Debugging” is a tad disingenuous, it’s mostly networking. But then again, networking is like the vast majority of what can actually&nbsp;fail. </p>
<p>The very last in the menu is a link that quite plainly says “Disconnect”, and opposite is a piece of text representing the application cache’s status. Disconnect is nice for when the network’s flakey and you know your connection won’t last long anyway. Or if you’re like antisocial and need to make your own little corner to cry in. Or something like that. Sure. Okay.&nbsp;Next.</p>
<h3 id="the-main-interface">The Main&nbsp;Interface</h3>
<p>I think I’m going to start over with this&nbsp;manual.</p>
<h1 id="blog-post">Blog&nbsp;Post</h1>
<p>For the past few weeks, I’ve been working on a project which was tentatively titled “Protobowl”, short for “Prototype Quizbowl Application”. And that probably suffices as some sort of cursory description of what it is, it’s an app which tries to mimic the experience of a quiz bowl competition online. Most importantly, it was designed for multiplayer from day&nbsp;one.</p>
<h2 id="backstory">Backstory</h2>
<p>The github page for this project was created two weeks ago at time of writing, but the history of the project actually extends much further back. For the past two years, I’ve been a member of my school’s quiz bowl team, not a particularly illustrious team, but like any non-dysfunctional organization, we do have a sense of enthusiasm for the game. I’ve wanted to do something which had something to do with it for a while, but never found a sufficient impetus to do it until late in&nbsp;May.</p>
<p>On May 25th of this year, I was introduced to the website quizbowldb.com which has a pretty cool question reader. My friend, who belongs to a team which is significantly better (as an understatement) was using that tool to prepare for a tournament. I spent a few minutes looking at the site and felt mildly disappointed that multiplayer didn’t work, but at least I found some niche that was worth catering&nbsp;to.</p>
<h3 id="bayesian-classifier">Bayesian&nbsp;Classifier</h3>
<p>The first thing which needed to be done was getting some set of labeled questions for the database. I looked around and found a few sources but most of them weren’t really large or labeled. I had finished the online <span class="caps">AI</span> class a few months ago, and felt like applying it in a fairly obvious scenario, so over the course of the next few hours I built a simple naive bayesian classifier to give categories to&nbsp;questions. </p>
<p>But, in order to do that, I had to first have some manually labeled corpus. I certainly wasn’t up for the tedium, so I decided to pull some from the quizbowldb.com site to seed the algorithm. At that point in time, for some reason, I was using some preview release of Windows 8 and rather regrettably couldn’t use wget. But I coped by writing a short python script (rather than the more reasonable solution of rebooting into another operating system) which would incrementally clone the site’s&nbsp;database. </p>
<p>Because of rate limiting or something to that effect, the script only pulled about 10 questions every 40 seconds, and given that there were 30,000 questions in the database, the process wasn’t terribly fast. I eventually booted back into linux and rewrote the script so that it was resumable (for the event that the script might be interrupted for some reason on its scheduled week-long&nbsp;run). </p>
<p>However, by the next day, some number of them were downloaded and that small number was enough to train the classifier. The first thing was trying to run the classifier on the question set itself and comparing how well it fared. The results were actually surprisingly good, and after careful combing through the exceptions, it appeared that most of the errors manifested from the manual mislabeling of the original&nbsp;corpus. </p>
<p>After that initial successful result, I did a bit of work on a question extraction algorithm which would use the command line version of Abiword to convert .doc and .docx files that packets are usually distributed as into some machine readable format for feeding into the classifier. However, I never quite finished that, as school work caught up with me and I waited for the database to finish&nbsp;downloading.</p>
<h3 id="hiatus">Hiatus</h3>
<p>On June 7th, about two weeks after I built the first promising prototype of the question parser, I had noticed that the background task had finished. Actually, it finished something like a week earlier, but I hadn’t noticed. Lurking around through Wikipedia, I discovered that Roger Craig, the famed Jeopardy! contestant who wrote a program to help study had actually attended my high&nbsp;school.</p>
<p>But nothing really happened after that. The school year was nearing a close and the after school clubs were having their last meetings of the year. There was the standardized testing and the anxiety about the imminent end of the year, and I had other projects which seemed more enticing at the time. Narrower in scope and more doable in shorter periods of time. This app was always on the radar, it just gradually slipped further and further&nbsp;back.</p>
<h3 id="it-s-ac-attack">It’s Ac&nbsp;Attack</h3>
<p>I wasn’t the only person in my school’s quiz bowl team who was interested in pursuing the idea. In fact, it was Ben who actually started the app first. I didn’t write code for the actual project until two weeks&nbsp;ago.</p>
<p>Early in July (or possibly late in June), Ben wanted to build that quiz bowl application when I was still working on a few other projects as well as an internship. I gave him the big <span class="caps">JSON</span> file of questions and he toiled away for the next few days, experimenting first with Ruby on Rails and then later settling with Node.JS (and the accompanying popular&nbsp;stacks). </p>
<p>Within a few days, he had put out a pretty impressive application using Mongoose, Jade, Twitter Bootstrap, Express, and Node running on Heroku at the (now defunct) its-ac-attack <span class="caps">URL</span>. Soon afterwards search was fairly functional and I started to take an interest in the project again (having almost finished another project, though at time of writing, I have yet to begin writing the blog post for that&nbsp;project).</p>
<p>I felt like exploiting this opportunity to get acquainted somewhat with popular NodeJS frameworks and tools. I haven’t done much with Node for over two years, and the landscape has changed considerably in the intervening years. It’s a fast growing and developing community. However, I never really found interest in building the entire app. Managing users and doing search has always struck me as somewhat boring, in part because it’s hardly untreaded&nbsp;territory.</p>
<p>I wanted to skip straight into the low latency websocket-driven synchronized multiplayer. Ben was still acclimating to the multimodal (if I’m using these buzzwords right) paradigm of writing code meant to be executed on both the client and the server, so I decided to prototype a multiplayer&nbsp;environment.</p>
<h2 id="prototype-quizbowl-application">Prototype Quizbowl&nbsp;Application</h2>
<p>Chronologically, this places us at about two weeks ago. That’s actually quite confusing because I wrote that sentence a bit over a month ago, where “a month ago” means August 8th, and “now” means September 12th. That is, you can imagine the gap between the first sentence in this paragraph and the sentence immediately succeeding it as joined by that scene from Monty Python where the animator dies of some fatal heart attack, in which case that animator is me, and I just sort of gave up on writing the&nbsp;readme. </p>
<p>And just like that, in the blink of a sentence, it’s been another&nbsp;month. </p>
<h2 id="question-set-management-via-github">Question Set Management via&nbsp;Github</h2>
<p>Folder&nbsp;Structure:</p>
<pre><code><span style='display:none' detected-language='mathematica'></span>qb/
    <span class="hljs-number">2013</span>/
        <span class="caps">ACF</span> Nationals/
            <span class="hljs-keyword">Round</span> <span class="hljs-number">1</span>
            <span class="hljs-keyword">Round</span> <span class="hljs-number">2</span>
            <span class="hljs-keyword">Round</span> <span class="hljs-number">3</span>
            <span class="hljs-keyword">Round</span> <span class="hljs-number">4</span>
</code></pre><p>Here’s what the <span class="caps">JSON</span> is like from&nbsp;Mongo</p>
<pre><code><span style='display:none' detected-language='json'></span>{ "<span class="hljs-attribute">__v</span>" : <span class="hljs-value"><span class="hljs-number">0</span></span>, "<span class="hljs-attribute">_id</span>" : <span class="hljs-value">{ "<span class="hljs-attribute">$oid</span>" : <span class="hljs-value"><span class="hljs-string">"506e3e938b3d831d6a000001"</span> </span>}</span>, "<span class="hljs-attribute">answer</span>" : <span class="hljs-value"><span class="hljs-string">"The {Bronze Horseman}: A Petersburg Tale [accept The Copper Horseman or Mednyy vsadnik: Peterburgskaya povest’]"</span></span>, "<span class="hljs-attribute">category</span>" : <span class="hljs-value"><span class="hljs-string">"Literature"</span></span>, "<span class="hljs-attribute">difficulty</span>" : <span class="hljs-value"><span class="hljs-string">"Open"</span></span>, "<span class="hljs-attribute">fixed</span>" : <span class="hljs-value"><span class="hljs-number">1</span></span>, "<span class="hljs-attribute">inc_random</span>" : <span class="hljs-value"><span class="hljs-number">53.99425264270977</span></span>, "<span class="hljs-attribute">num</span>" : <span class="hljs-value"><span class="hljs-number">1</span></span>, "<span class="hljs-attribute">question</span>" : <span class="hljs-value"><span class="hljs-string">""</span></span>, "<span class="hljs-attribute">round</span>" : <span class="hljs-value"><span class="hljs-string">"2011-ACFNationals-BrownFinal.doc"</span></span>, "<span class="hljs-attribute">seen</span>" : <span class="hljs-value"><span class="hljs-number">36</span></span>, "<span class="hljs-attribute">tournament</span>" : <span class="hljs-value"><span class="hljs-string">"<span class="caps">ACF</span> Nationals"</span></span>, "<span class="hljs-attribute">type</span>" : <span class="hljs-value"><span class="hljs-string">"qb"</span></span>, "<span class="hljs-attribute">year</span>" : <span class="hljs-value"><span class="hljs-number">2011</span> </span>}
</code></pre><p>The question&nbsp;thingy</p>
<pre><code><span style='display:none' detected-language='livescript'></span><span class="hljs-comment">###</span>
<span class="hljs-attribute">tournament</span>: <span class="caps">ACF</span> Nationals
<span class="hljs-attribute">year</span>: <span class="hljs-number">2011</span>
<span class="hljs-comment">###</span>


---
<span class="hljs-attribute">difficulty</span>: Open
<span class="hljs-attribute">num</span>: <span class="hljs-number">1</span>
<span class="hljs-attribute">category</span>: Literature
<span class="hljs-attribute">round</span>: <span class="hljs-number">2011</span>-ACFNationals-BrownFinal.doc
<span class="hljs-attribute">answer</span>: The {Bronze Horseman}: A Petersburg Tale [accept The Copper Horseman <span class="hljs-keyword">or</span> Mednyy <span class="hljs-attribute">vsadnik</span>: Peterburgskaya povest’]

In a footnote <span class="hljs-keyword">to</span> <span class="hljs-keyword">this</span> work, the author claims <span class="hljs-literal">that</span> Mickiewicz’s depiction <span class="hljs-keyword">of</span> the same event as <span class="hljs-keyword">this</span> work, <span class="hljs-keyword">while</span> beautiful, was inaccurate. This poem opens <span class="hljs-keyword">with</span> a man standing <span class="hljs-literal">on</span> the shore imagining a time <span class="hljs-keyword">when</span> “all flags will visit us/ <span class="hljs-keyword">and</span> we will celebrate <span class="hljs-keyword">in</span> freedom,” after thinking <span class="hljs-literal">that</span> Nature intends <span class="hljs-keyword">for</span> him <span class="hljs-keyword">to</span> carve a <span class="hljs-built_in">window</span>. This work contains a famous passage expressing the poet’s love <span class="hljs-keyword">for</span> a city possessed <span class="hljs-keyword">of</span> an “Admiralty needle,” <span class="hljs-keyword">and</span> <span class="hljs-keyword">this</span> poem’s protagonist <span class="hljs-keyword">is</span> alleged <span class="hljs-keyword">to</span> have the name he does because the poet <span class="hljs-keyword">is</span> comfortable <span class="hljs-keyword">with</span> <span class="hljs-literal">it</span>, a reference <span class="hljs-keyword">to</span> <span class="hljs-literal">that</span> poet’s earlier work. The protagonist <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span> work sits <span class="hljs-literal">on</span> a marble sentry lion looking at his lover’s house instead <span class="hljs-keyword">of</span> the title character behind him. After the death <span class="hljs-keyword">of</span> his lover Parasha <span class="hljs-keyword">in</span> a flood, <span class="hljs-keyword">this</span> poem’s protagonist goes mad <span class="hljs-keyword">and</span> wanders the streets before confronting the title figure. For ten points, identify <span class="hljs-keyword">this</span> poem <span class="hljs-keyword">in</span> which Yevgeniy imagines the title equestrian statue <span class="hljs-keyword">of</span> Peter the Great chasing him through the streets <span class="hljs-keyword">of</span> St. Petersburg, a poem <span class="hljs-keyword">by</span> Alexander Pushkin.
---
</code></pre>
            </section>
          </article>
          <hr>
          <article class="article intro">
            <header>
              <h2><a href="/2013/03/hqx-js-pixel-art-scaling-in-the-browser/">hqx.js - pixel art scaling in the browser</a> <span class="subtitle">31 March 2013</span></h2>
            </header>
            <section class="content"><p><a href="http://antimatter15.github.com/hqx.js/"><div class="pic md" style="" ><img alt="Screenshot 2013-03-31 at 5.15.07 PM"  src="/articles/2013/hqx.js%20-%20pixel%20art%20scaling%20in%20the%20browser/Screenshot-2013-03-31-at-5.15.07-PM.png" ></div></a></p>
<p>Every once in a while some gadget has the misfortune of epitomizing the next first world problem. I guess right now, this is owning a Retina (or equivalent) laptop, tablet (arguably phone, but most web pages are scaled out so it’s not that big of a problem) and being irked at the prevalence of badly scaled graphics. So there’s a new buzzword “Retina Ready” for websites, layouts and designs which support higher resolution graphics for devices which support it, often meaning of lots of <a href="http://37signals.com/svn/posts/3271-easy-retina-ready-images-using-scss">new files and new css rules</a>. It’s this trend of high-pixel-density devices (with devices like the <a href="http://www.apple.com/ipad/">iPad 3</a>, <a href="http://www.apple.com/macbook-pro/">Retina Macbook Pro</a>, <a href="http://www.google.com/nexus/10/">Nexus 10</a> and <a href="http://www.google.com/intl/en/chrome/devices/chromebook-pixel/">Chromebook Pixel</a> - though I for one don’t currently have any of them, just this old glitchy-albeit-functional first generation Chromebook) that is <a href="https://github.com/twitter/bootstrap/pull/6342">driving people</a> to vector <a href="http://fortawesome.github.com/Font-Awesome/">icon fonts</a>.</p>
<p>But the problem of radical increases in terms of resolution isn’t a new one. Old <a href="http://en.wikipedia.org/wiki/Video_game_arcade_cabinet#Parts_of_an_arcade_cabinet">arcade games</a> rarely exceeded 260x315, and the <a href="http://en.wikipedia.org/wiki/Game_Boy_Color#Specifications">Game Boy Color</a> had a paltry 160x144. While a few people still nostalgically lug around game cabinets and dig out their dust-covered childhood handheld consoles for nostalgic sneezing fits, most of the old games are now played with emulators running on systems several orders of magnitude more sophisticated in every imaginable aspect. So that arcade monitor that once could engross a childhood (and maybe early manhood) now appears nothing more than a two inch square on a twenty inch monitor. But luckily there is a surprisingly good solution to all of this in the form of algorithms designed in particular for <a href="http://en.wikipedia.org/wiki/Image_scaling#Pixel_art_scaling_algorithms">scaling pixel art</a>.</p>
<p>The most basic form of image scaling that exists is called <strong>nearest-neighbor interpolation</strong>, which is extra simple for retina devices because it means simply growing the size of each pixel by a factor of two along each axis. That leads to things which are blocky, and unless you’re part of an 8-bit retro-art project with a chiptune soundtrack looks&nbsp;ugly.</p>
<p>The most common form of image scaling borrows a lot from the math and signal processing fields, with names like <strong>bilinear, bicubic, and lanzcos</strong> essentially they treat an image as some kind of composition of sinusoidal parts and try to ideally extrapolate and interpolate such that visible artifacts are marginalized. It’s all very mathy, but the result is kind of the opposite of nearest-neighbor because it has the tendency to make things blurry and&nbsp;fuzzy.</p>
<p>The thing is that the latter tries to reach some kind of mathematical ideal, because images taken by your friendly neighborhood <span class="caps">DSLR</span>-toting amateur (spider-powers optional) are actually samples of real world points of data— so this mathematical pursuit of purity works out very well. There’s still the factor-of-four information-theoretic gap that needs to be filled in with best-guesstimates, but there isn’t really any way to improve the way a photograph is scaled without using a higher-resolution version of said photograph. But most photographs that are taken already are sixteen-megapixel monsters and they usually still look acceptable when&nbsp;upscaled.</p>
<p>The problem arises with pixel art, little icons or buttons which someone painstakingly drew in Photoshop one lazy summer afternoon in the late 90s. They’re everywhere and each pixel isn’t captured and encoded by a sampling algorithm of some analog natural phenomona— each pixel was lovingly crafted and planted by some meticulous artist. There is no underlying analog signal to interpret, it’s a direct perceptual hookup to the mind of the creator— and that’s why bicubic sampling looks especially bad&nbsp;here.</p>
<p>Video games, before 3d graphics engines and math-aware anti-aliasing concerned with murdering <a href="http://en.wikipedia.org/wiki/Jaggies">jaggies</a>, in the old civilized age of <a href="http://en.wikipedia.org/wiki/Bit_blit">bit-blitting</a>, were mostly constructed out of pixel art. Each color in that limited palette was placed there for a reason and could be exploited by specialized algorithms to construct higher-quality upscaled versions which remained sharp. These come with the names <strong><span class="caps">EPX</span>, Scale2x, AdvMAME2x, Eagle, 2×Sal, Super <strong>2×Sal,</strong></strong> <strong>hqx, </strong>and most recently, <strong>Kopf-Lischinksi</strong>. These algorithms could be applied in real time to emulator windows to acceptably scale a game to new sizes while eschewing jagged corners and blurry edges. <em>
</em></p>
<p>Anyway the cool thing is that you can probably apply these algorithms in lieu of the nearest-neighbor or bilinear scaling algorithms used by browsers on retina platforms to effortlessly upgrade old sites to shiny and smooth. With a few rough heuristics (detect if an image appears to be a sprite by testing for a limited palette, see if the image is small or a perfect square, detect if it has transparent pixels) this could be packed into a simple script include that website makers could easily inject into their pages to <strong>automagically upconvert old graphics</strong> to new shiny high-resolution ones without having to go through the actual effort of drawing new high resolution graphics and uploading them online. And this could also be packaged as a browser extension so that, once and forever after, <strong>this first-world nuisance shall be no more</strong>.</p>
<p><em>Before setting out to port <a href="https://github.com/Arcnor/hqx-java">hqx-java</a> to <a href="https://github.com/antimatter15/hqx.js">javascript</a>, I actually did some cursory googling to see if it actually had been done before. Midway through writing this post, I found out that it actually had <a href="http://phoboslab.org/log/2010/12/hqx-scaling-in-javascript">been done before</a>, in a better way, so I won’t even bother linking to my inferior version. But either way the actual goal of this project was the part which was detailed in the last paragraph, that of an embeddable script or browser extension which could heuristically apply pixel-scaling algorithms— something I probably won’t bother trying to do until at least after I get my college laptop (which I anticipate will be a Retina Macbook Pro 15”). Nonetheless, I haven’t written an actual blog post in almost three months and it’s the last day of this month, and I guess it’s better than having you all (though nobody’s probably going to read this now that Google Reader has died) assume that I’ve died. Anyway, now I’m probably going to retroactively publish old blog posts in previous months to fraud&nbsp;continuity.</em></p>

            </section>
          </article>
          <hr>
          <article class="article intro">
            <header>
              <h2><a href="/2012/05/visualizing-facebook-activity/">Visualizing Facebook Activity</a> <span class="subtitle">29 May 2012</span></h2>
            </header>
            <section class="content"><p><a href="/articles/2012/Visualizing%20Facebook%20Activity/392722_2010404474880_380090264_n.jpg"><div class="pic md" style="" ><img alt=""  src="/articles/2012/Visualizing%20Facebook%20Activity/392722_2010404474880_380090264_n-300x300.jpg" ><div class="caption">392722_2010404474880_380090264_n</div></div></a></p>
<p>You might have noticed that I haven’t written much for this blog in the past few months. In truth, it’s because of school work, which has never really been something of an issue before. This is, quite probably the least productive stretch of time in my life thus far. I have a suspicion that this issue stems more psychologically than due to some radical increase in work load, but I haven’t looked in to testing that hypothesis (I’ve been collecting data hour-by-hour about what I’ve been doing in the past two years, so I could probably look into it if I were actually interested in that matter). But school’s nearing a close, and hopefully I can get back to a more productive lifestyle, maintaining my blog and most importantly, trying out cool things. I have a few things which I am working on at the moment which should be completed in the coming weeks (though I make no assurances). But since I have an internal goal for writing one blog post per month, I’m going to recycle a project from December of&nbsp;2011.</p>
<p>Nearly every day, I inevitably end up glancing at my Facebook “buddy list” of sorts, wondering how many people are online. It’s a figure which almost always seems to depend on the time of day, and behaves almost like clockwork, there’s always a massive swarm of people online around 10-11pm, and hardly anyone is ever online at 4 in the morning. I guess the problem with drawing any conclusions from this in particular is how specific a group this graphic represents. It constitutes my friends, and in particular, my Facebook friends. Essentially all of them are people I’ve encountered in real life, and may or may not actually find interest in. But the thing that unites just about everyone is that they’re generally high school&nbsp;aged.</p>
<p>Before going on discussing how pretty of a chart this is, I think it’s worth going through what this chart actually represents. It’s quite easy to tell that this is in fact a polar chart, and on the inner circle, you can tell that it’s a 24 hour clock. Each of the rings represents a friend, and the rings are sorted by the total amount of time spent on Facebook in the given period. So you can see that toward the middle, the graph is almost opaque at every time, whereas on the fringes, the online activity is quite erratic and&nbsp;infrequent.</p>
<p>So, where does this data come from? It’s actually quite simple to get from the Facebook <span class="caps">API</span>. I have a cron job which runs every minute to run a FQL request and save the results to a specific log&nbsp;file.</p>
<script src="https://gist.github.com/2828107.js?file=download.sh"></script>

<p>The actual <span class="caps">FQL</span> which runs in order to retrieve the list of online users&nbsp;is</p>
<blockquote>
<p><span class="caps">SELECT</span> uid, name, online_presence FROM user  WHERE online_presence IN (‘active’, ‘idle’) AND uid IN (SELECT uid2 FROM friend WHERE uid1 =&nbsp;me())</p>
</blockquote>
<p>Basically, get the User <span class="caps">ID</span>, the name, and their online presence state for friends who are either active or idle in the list of the logged-in user. Since Facebook is an OAuth2-type API, you need an access token in order to do anything cool. I just use the <a href="https://developers.facebook.com/tools/explorer/145634995501895/?method=GET&amp;path=1686802955">Facebook Graph <span class="caps">API</span> Explorer</a> to generate my access tokens. Just go press “Get Access Token”, and select (at minimum) the permissions “user_online_presence”, “friends_online_presence” and “offline_access”. Then copy and paste the revealed token into some <tt>authkey.txt</tt> and you should be&nbsp;set.</p>
<p>I have a python script to go through the log file and to render it as the polar chart which is depicted on the top of the page. The code used for that is frankly atrocious and the output is even more so. Python Imaging Library is used, which is a lovely library, except not for drawing graphics. There isn’t any smoothing or anti-aliasing on the arcs drawn by <span class="caps">PIL</span> and they all look hideous. So I render the chart at some absurdly high resolution and down-resize it in GIMP while adding layering, blurs and opacity in order to make the picture somewhat less atrocious. Also, it does’t support restricting the app to drawing a specific day of the week, even though it might be interesting to see the how the trend differs on a weekday versus&nbsp;weekend.</p>
<p>Something interesting about the appearance of the polar graph is that it almost resembles something of a digital fingerprint, and that brings up some interesting privacy considerations. Inside that graphic are the Facebook browsing habits of some two hundred people. There’s the question of how much this changes day by day for users, and to what extent this can be used to identify people. And even if a single ring doesn’t unambiguously represent a single person, the two hundred or so rings of their friends probably goes pretty far into identifying people. There’s also a striking amount of uniformity that says a lot about the type of people who I tend to associate with. Just at a glance, one can tell that there are very few people I’m friends with on Facebook who live in different timezones. Maybe what’s more dangerous than being able to identify a person is to be able to identify what kind of groups that person belongs to. And over the course of a day, just about everyone checks Facebook a few&nbsp;times. </p>

            </section>
          </article>
          <hr>
          <article class="article intro">
            <header>
              <h2><a href="/2010/10/getting-webgl-opengl-2-to-work-on-a-ati-1950x/">Getting WebGL/OpenGL 2 to work on a ATI 1950X</a> <span class="subtitle">31 October 2010</span></h2>
            </header>
            <section class="content"><p><a href="https://launchpad.net/~xorg-edgers/+archive/ppa">https://launchpad.net/~xorg-edgers/+archive/ppa</a></p>
<hr>
<p>This post was never finished, but I think that link is helpful enough without a write&nbsp;up. </p>

            </section>
          </article>
          <hr>
          <article class="article intro">
            <header>
              <h2><a href="/2009/09/rsvgshim-a-new-svg-shim-that-renders-to-svg-and-vml-using-raphael/">RSVGShim A new SVG Shim that renders to SVG and VML using Raphael</a> <span class="subtitle">04 September 2009</span></h2>
            </header>
            <section class="content"><p>For like an hour (so, not a really long time, and nothing near SVGWeb) or so, I was working on a new <span class="caps">SVG</span> shim similar to SVGWeb except that it renders to VML and SVG through Raphael rather than Flash (so now I can actually brag about not having <em>any</em> plugins :P). Using it is somewhat simpler than SVGWeb, except that you need some replacing, but no need for a server, htcs, etc. Plus, the file is only 3.2 kb uncompressed, only 740 bytes gzipped and <span class="caps">YUI</span>’d. Also, it only works with rectangles and ellipses but could be somewhat easily modified to support anything that raphael does. While probably it does not work on IE (as I use linux and have no way to test), it’s an interesting&nbsp;concept.</p>
<p>It only works with pages where a <span class="caps">SVG</span> element is added dynamically after the page is loaded (contrasting to SVGWeb which only allows a SVG element to be added in&nbsp;code).</p>
<pre><code><span style='display:none' detected-language='coffeescript'></span><span class="hljs-reserved">var</span> svgroot = rshimdoc.createElementNS(<span class="hljs-literal">null</span>, <span class="hljs-string">"svg"</span>); <span class="hljs-regexp">//</span>you coudl also just use normal createElement(<span class="hljs-string">"svg"</span>), but it must be rshimdoc instead <span class="hljs-keyword">of</span> <span class="hljs-built_in">document</span>

svgroot.setAttribute(<span class="hljs-string">'width'</span>,<span class="hljs-number">100</span>); 
svgroot.setAttribute(<span class="hljs-string">'height'</span>, <span class="hljs-number">100</span>);


(<span class="hljs-keyword">new</span> RHTMLElement(html element)).appendChild(svgroot)
</code></pre><p><span class="caps">OR</span></p>
<pre><code><span style='display:none' detected-language='objectivec'></span>rshimdoc<span class="hljs-variable">.getElementById</span>(element <span class="hljs-keyword">id</span>)<span class="hljs-variable">.appendChild</span>(svgroot)
</code></pre><p>So it doesn’t deviate too much from the <span class="caps">SVG</span> spec (just replacing document with rsvgdoc should work). And in other news, I’m moving some of my smaller works to github, so this project is also going to be hosted on&nbsp;GitHub.</p>
<p><a href="http://github.com/antimatter15/rsvgshim/tree/master">http://github.com/antimatter15/rsvgshim/tree/master</a></p>

            </section>
          </article>
          <hr>
          <article class="article intro">
            <header>
              <h2><a href="/2009/08/vectoreditor-updates-lines-rotation-more/">VectorEditor Updates lines, rotation, more</a> <span class="subtitle">10 August 2009</span></h2>
            </header>
            <section class="content"><p>During the last two days I worked a bit on my cross platform, Raphael based vector graphics editor. It now supports Firefox, Opera, Chrome, probably Safari and magically, something called <span class="caps">IE</span>. Yes, it works on that nasty terror.
Really, the project started with just the idea of being able to support IE. Sure it has a few neat features (multiple select mainly), but the fundamental idea is to support IE and to do so in a stable manner.
It’s actually running quite well in IE, though only the latest version has been&nbsp;tested.</p>
<p>Among the updates is a new delete tool that is far more flexible and powerful. It is now not just a button but an entire tool. So while you can still click on it to delete your current selection, you can also use the tool to click on shapes or drag and delete whole groups (not sure what that thing is called). It even has a nice red tint to signify deleting.
There is also event listening, vX support (it only uses events and position), and selecting fill, stroke, stroke opacity, fill opacity, and stroke&nbsp;width.</p>
<p>It also integrates well into the Ajax Animator in an almost drop-in replacement type. Maybe eventually something to choose between VectorEditor and Onlypaths. The really only bug features there are multiple select and drag and line&nbsp;editing.</p>
<p>Lines are now done almost perfectly. Dragging them works perfectly and it shows two little boxes on the ends that fan be dragged to edit. This vastly simplifies the old issues with lines and stick figures. Stick figures that inherently satisfy me a lot because that was the highes level of animation I ever&nbsp;did.</p>
<p>It’s probably a bad thing that the developer od an animation application never did anything more complex than stick figures, and probably makes it seem strange for me to even start it. But anyone with more knowledge of animation would not be so naiive as to attempt&nbsp;this.</p>
<p><a href="http://jsvectoreditor.googlecode.com/svn/trunk/index.html">http://jsvectoreditor.googlecode.com/svn/trunk/index.html</a></p>

            </section>
          </article>
          <hr>
          <div class="nav"><a href="/archive" class="newer">« Archives</a><a href="/page/1" class="next">Latest Posts »</a>
          </div>
        </div>
      </div>
    </div>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-1367972-3', 'auto');
      ga('send', 'pageview');
      
    </script>
    <script>
      function squish(){
        document.getElementById("squishfoot").className += "squish"
      }
    </script>
    <style>
      .squish { font-size: 9px }
      .squishsquish { font-size: 8px }
      .squishsquishsquish { font-size: 7px }
      .squishsquishsquishsquish { font-size: 6px }
      .squishsquishsquishsquishsquish { font-size: 5px }
      .squishsquishsquishsquishsquishsquish { font-size: 4px }
      .squishsquishsquishsquishsquishsquishsquish { visibility: hidden }
      .squishsquishsquishsquishsquishsquishsquish-with-some-good-css-by-omrelliug { }
    </style>
    <div class="graybar bottom">
      <footer>
        <div id="squishfoot">I'm a tiny footer, please don't <a href="javascript:squish()">squish</a> me</div>
      </footer>
    </div>
  </body>
</html>