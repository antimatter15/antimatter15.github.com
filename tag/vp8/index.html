<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <link rel="alternate" href="http://localhost:8080/feed.xml" type="application/rss+xml" title="somewhere to talk about ideas and projects and stuff like everyone else">
    <link rel="stylesheet" href="/style/main.css">
    <title>#vp8</title>
  </head>
  <body>
    <div class="whitebox">
      <div class="graybar top">
        <header class="top">
          <div class="slogan">somewhere to talk about random ideas and projects like everyone else</div><a href="/">
            <h1 class="logo">
              stuff
               <span class="byline">by antimatter15</span>
            </h1></a>
        </header>
      </div>
      <div id="main">
        <div class="sidebar">
          <div class="about">
            <p class="emph">
              Hi. I’m <b>Kevin Kwok</b>, and I’m currently a sophomore at <b>MIT</b>, 
              and this is my obligatory online presence or whatever.  
            </p>
            <p>
              I regularly updated this site from 2007, when I started it in elementary school, 
              to summer 2014, when it was unwittingly absorbed into an international phishing ring.
            </p>
            <p>
              But like a phoenix, hydra or the national deficit, the site is back 
              again bigger than ever (after a rather long gestation period).
            </p>
            <p>
              For more obnoxious autobiographical content 
              blended with bits of nostalgia for the old PHP-on-sketchy-free-webhosting days, <a href="/about/">click here.</a>
            </p>
          </div><br>
          <section class="archive"><a href="/archive">
              <h2>Archive</h2></a>
            <ul>
              <li>
                <ul>
                  <li><a href="/2015/04"><span class="month">April</span> <span class="year">2015</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2014/12"><span class="month">December</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/06"><span class="month">June</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/05"><span class="month">May</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/04"><span class="month">April</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/03"><span class="month">March</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/02"><span class="month">February</span> <span class="year">2014</span></a></li>
                  <li><a href="/2014/01"><span class="month">January</span> <span class="year">2014</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2013/12"><span class="month">December</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/11"><span class="month">November</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/10"><span class="month">October</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/09"><span class="month">September</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/08"><span class="month">August</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/07"><span class="month">July</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/06"><span class="month">June</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/05"><span class="month">May</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/04"><span class="month">April</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/03"><span class="month">March</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/02"><span class="month">February</span> <span class="year">2013</span></a></li>
                  <li><a href="/2013/01"><span class="month">January</span> <span class="year">2013</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2012/12"><span class="month">December</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/11"><span class="month">November</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/10"><span class="month">October</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/09"><span class="month">September</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/08"><span class="month">August</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/07"><span class="month">July</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/06"><span class="month">June</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/05"><span class="month">May</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/04"><span class="month">April</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/03"><span class="month">March</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/02"><span class="month">February</span> <span class="year">2012</span></a></li>
                  <li><a href="/2012/01"><span class="month">January</span> <span class="year">2012</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2011/12"><span class="month">December</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/11"><span class="month">November</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/10"><span class="month">October</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/09"><span class="month">September</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/08"><span class="month">August</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/07"><span class="month">July</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/06"><span class="month">June</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/05"><span class="month">May</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/04"><span class="month">April</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/03"><span class="month">March</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/02"><span class="month">February</span> <span class="year">2011</span></a></li>
                  <li><a href="/2011/01"><span class="month">January</span> <span class="year">2011</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2010/12"><span class="month">December</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/11"><span class="month">November</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/10"><span class="month">October</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/09"><span class="month">September</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/08"><span class="month">August</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/07"><span class="month">July</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/06"><span class="month">June</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/05"><span class="month">May</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/04"><span class="month">April</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/03"><span class="month">March</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/02"><span class="month">February</span> <span class="year">2010</span></a></li>
                  <li><a href="/2010/01"><span class="month">January</span> <span class="year">2010</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2009/12"><span class="month">December</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/11"><span class="month">November</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/10"><span class="month">October</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/09"><span class="month">September</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/08"><span class="month">August</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/07"><span class="month">July</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/06"><span class="month">June</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/05"><span class="month">May</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/04"><span class="month">April</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/03"><span class="month">March</span> <span class="year">2009</span></a></li>
                  <li><a href="/2009/01"><span class="month">January</span> <span class="year">2009</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2008/12"><span class="month">December</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/11"><span class="month">November</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/10"><span class="month">October</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/09"><span class="month">September</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/08"><span class="month">August</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/07"><span class="month">July</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/06"><span class="month">June</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/05"><span class="month">May</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/04"><span class="month">April</span> <span class="year">2008</span></a></li>
                  <li><a href="/2008/01"><span class="month">January</span> <span class="year">2008</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2007/12"><span class="month">December</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/11"><span class="month">November</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/10"><span class="month">October</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/09"><span class="month">September</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/08"><span class="month">August</span> <span class="year">2007</span></a></li>
                  <li><a href="/2007/05"><span class="month">May</span> <span class="year">2007</span></a></li>
                </ul><br>
              </li>
              <li>
                <ul>
                  <li><a href="/2006/09"><span class="month">September</span> <span class="year">2006</span></a></li>
                  <li><a href="/2006/08"><span class="month">August</span> <span class="year">2006</span></a></li>
                </ul><br>
              </li>
            </ul>
          </section>
          <div class="tags">
            <h2>Tags</h2><a href="/tag/3D" style="font-size: 13px">3D </a><a href="/tag/actionscript" style="font-size: 11px">actionscript </a><a href="/tag/ajax" style="font-size: 20px">ajax </a><a href="/tag/ajax animator" style="font-size: 20px">ajax animator </a><a href="/tag/animation" style="font-size: 11px">animation </a><a href="/tag/api" style="font-size: 13px">api </a><a href="/tag/apple" style="font-size: 20px">apple </a><a href="/tag/art" style="font-size: 11px">art </a><a href="/tag/awesome" style="font-size: 13px">awesome </a><a href="/tag/blog" style="font-size: 19px">blog </a><a href="/tag/browser" style="font-size: 20px">browser </a><a href="/tag/bugfix" style="font-size: 15px">bugfix </a><a href="/tag/canvas" style="font-size: 15px">canvas </a><a href="/tag/change" style="font-size: 15px">change </a><a href="/tag/chrome" style="font-size: 20px">chrome </a><a href="/tag/chrome extension" style="font-size: 11px">chrome extension </a><a href="/tag/chrome os" style="font-size: 11px">chrome os </a><a href="/tag/chromebook" style="font-size: 11px">chromebook </a><a href="/tag/code" style="font-size: 13px">code </a><a href="/tag/color" style="font-size: 11px">color </a><a href="/tag/css" style="font-size: 11px">css </a><a href="/tag/demo" style="font-size: 11px">demo </a><a href="/tag/design" style="font-size: 19px">design </a><a href="/tag/elitist" style="font-size: 20px">elitist </a><a href="/tag/evil" style="font-size: 19px">evil </a><a href="/tag/experiment" style="font-size: 15px">experiment </a><a href="/tag/extension" style="font-size: 20px">extension </a><a href="/tag/ExtJS" style="font-size: 20px">ExtJS </a><a href="/tag/facebook" style="font-size: 11px">facebook </a><a href="/tag/fast" style="font-size: 20px">fast </a><a href="/tag/features" style="font-size: 15px">features </a><a href="/tag/firefox" style="font-size: 20px">firefox </a><a href="/tag/flash" style="font-size: 17px">flash </a><a href="/tag/free" style="font-size: 11px">free </a><a href="/tag/function" style="font-size: 13px">function </a><a href="/tag/future" style="font-size: 15px">future </a><a href="/tag/GAE" style="font-size: 13px">GAE </a><a href="/tag/github" style="font-size: 15px">github </a><a href="/tag/google" style="font-size: 20px">google </a><a href="/tag/google code" style="font-size: 11px">google code </a><a href="/tag/google wave" style="font-size: 20px">google wave </a><a href="/tag/graphics" style="font-size: 15px">graphics </a><a href="/tag/hacking" style="font-size: 11px">hacking </a><a href="/tag/history" style="font-size: 11px">history </a><a href="/tag/hosting" style="font-size: 19px">hosting </a><a href="/tag/html5" style="font-size: 19px">html5 </a><a href="/tag/idea" style="font-size: 13px">idea </a><a href="/tag/images" style="font-size: 11px">images </a><a href="/tag/interface" style="font-size: 11px">interface </a><a href="/tag/internet exploder" style="font-size: 20px">internet exploder </a><a href="/tag/ipad" style="font-size: 17px">ipad </a><a href="/tag/javascript" style="font-size: 20px">javascript </a><a href="/tag/json" style="font-size: 15px">json </a><a href="/tag/library" style="font-size: 11px">library </a><a href="/tag/lines" style="font-size: 13px">lines </a><a href="/tag/linux" style="font-size: 17px">linux </a><a href="/tag/login" style="font-size: 15px">login </a><a href="/tag/mac" style="font-size: 11px">mac </a><a href="/tag/magical" style="font-size: 15px">magical </a><a href="/tag/math" style="font-size: 11px">math </a><a href="/tag/meta" style="font-size: 13px">meta </a><a href="/tag/microsoft" style="font-size: 13px">microsoft </a><a href="/tag/microwave" style="font-size: 15px">microwave </a><a href="/tag/mirror" style="font-size: 11px">mirror </a><a href="/tag/multitouch" style="font-size: 13px">multitouch </a><a href="/tag/new" style="font-size: 19px">new </a><a href="/tag/ocr" style="font-size: 11px">ocr </a><a href="/tag/offline" style="font-size: 17px">offline </a><a href="/tag/old" style="font-size: 17px">old </a><a href="/tag/onlypaths" style="font-size: 17px">onlypaths </a><a href="/tag/pi" style="font-size: 19px">pi </a><a href="/tag/processing" style="font-size: 11px">processing </a><a href="/tag/progress" style="font-size: 11px">progress </a><a href="/tag/prototype" style="font-size: 13px">prototype </a><a href="/tag/python" style="font-size: 20px">python </a><a href="/tag/raphael" style="font-size: 19px">raphael </a><a href="/tag/release" style="font-size: 13px">release </a><a href="/tag/rewrite" style="font-size: 13px">rewrite </a><a href="/tag/security" style="font-size: 15px">security </a><a href="/tag/shiny" style="font-size: 20px">shiny </a><a href="/tag/ShinyTouch" style="font-size: 13px">ShinyTouch </a><a href="/tag/site" style="font-size: 13px">site </a><a href="/tag/small" style="font-size: 19px">small </a><a href="/tag/speed" style="font-size: 11px">speed </a><a href="/tag/SVG" style="font-size: 15px">SVG </a><a href="/tag/text" style="font-size: 11px">text </a><a href="/tag/touch" style="font-size: 13px">touch </a><a href="/tag/update" style="font-size: 20px">update </a><a href="/tag/upload" style="font-size: 17px">upload </a><a href="/tag/user interface" style="font-size: 11px">user interface </a><a href="/tag/vector" style="font-size: 13px">vector </a><a href="/tag/vectoreditor" style="font-size: 19px">vectoreditor </a><a href="/tag/version" style="font-size: 13px">version </a><a href="/tag/video" style="font-size: 15px">video </a><a href="/tag/vp8" style="font-size: 11px">vp8 </a><a href="/tag/vX JS" style="font-size: 19px">vX JS </a><a href="/tag/wave" style="font-size: 20px">wave </a><a href="/tag/wikify" style="font-size: 20px">wikify </a><a href="/tag/wikipedia" style="font-size: 17px">wikipedia </a><a href="/tag/wordpress" style="font-size: 20px">wordpress </a>
          </div>
        </div>
        <div id="content">
          <h1>#vp8</h1>
          <article class="article intro">
            <header>
              <h2><a href="/2012/08/whammy-a-real-time-javascript-webm-encoder/">Whammy: A Real Time Javascript WebM Encoder</a> <span class="subtitle">19 August 2012</span></h2>
            </header>
            <section class="content"><p><a href="/articles/2012/Whammy%20A%20Real%20Time%20Javascript%20WebM%20Encoder/screenshot.png"><div class="pic md" style="" ><img src="/articles/2012/Whammy%20A%20Real%20Time%20Javascript%20WebM%20Encoder/screenshot.png" alt="" ><div class="caption">screenshot</div></div></a></p>
<p>This is sort of a conceptual reversal (or not, this might just be making the description needlessly confusing) of one of my older projects,<a href="https://github.com/antimatter15/weppy">Weppy</a>. First, what Weppy did was it added support for WebP in browsers which didn’t support it by converting it into a single-frame video. This is instead predicated on the assumption that the browser already has support for WebP (at this point, it means it only works on Chrome since it’s the only browser which actually supports WebP), not only decoding WebP but encoding it as&nbsp;well.</p>
<p>The cool thing about WebP which was exploited in Weppy is that it’s actually based on the same codec as WebM, On2’s <span class="caps">VP8</span>. That means the actual image data, when the container formats are ignored, are virtually interchangable. With a catch: it’s intraframe&nbsp;only.</p>
<p>So it’s a video encoder in that it generates <code>.webm</code> files which should play in just about any program or device which supports the WebM format. But interframe compression is actually a fairly important thing which could reduce the file size by an order of magnitude or&nbsp;more.</p>
<p>But, there isn’t too much you can do on the client side in the ways of encoding stuff. And whatever you do, you basically can’t do interframe compression (aside from some really rudimentary delta encoding). More or less, when your only alternative is to maintain an array of DataURL encoded frames or encoding it (rather slowly) as a <a href="https://github.com/antimatter15/jsgif"><span class="caps">GIF</span></a>, a fast but inefficient WebM encoder stops looking too&nbsp;bad.</p>
<p>This was actually <a href="https://github.com/gengkev">Kevin Geng</a>‘s idea, and he contributed some code too, but in the end most of the code was just leftovers from&nbsp;Weppy.</p>
<h2 id="demo">Demo</h2>
<p><a href="http://antimatter15.github.com/whammy/clock.html">http://antimatter15.github.com/whammy/clock.html</a></p>
<h2 id="basic-usage">Basic&nbsp;Usage</h2>
<p>First, let’s include the <span class="caps">JS</span> file. It’s self contained and basically namespaced, which is pretty good I guess. And it’s not too big, minified it’s only about 4KB and gzipped, it’s under 2KB. That’s like really really&nbsp;tiny.</p>
<pre><code><span style='display:none' detected-language='handlebars'></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"whammy.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span></span>
</code></pre><p>The <span class="caps">API</span> isn’t terrible either (at least, that’s what I’d like to&nbsp;hope)</p>
<pre><code><span style='display:none' detected-language='coffeescript'></span><span class="hljs-reserved">var</span> encoder = <span class="hljs-keyword">new</span> Whammy.Video(<span class="hljs-number">15</span>); 
</code></pre><p>That <code>15</code> over there is the frame rate. There’s a way to set the individual duration of each frame manually, but you can look in the code for&nbsp;that.</p>
<pre><code><span style='display:none' detected-language='vhdl'></span>encoder.add(<span class="hljs-keyword">context</span> <span class="hljs-keyword">or</span> canvas <span class="hljs-keyword">or</span> dataURL); 
</code></pre><p>Here, you can add a frame, this happens fairly quickly because basically all it’s doing is running <code>.toDataURL()</code> on the canvas (which isn’t exactly a speed-demon either, but it’s acceptable enough most of the time) and plopping the result onto an array (no computation or anything). The actual encoding only happens when you call <code>.compile()</code></p>
<pre><code><span style='display:none' detected-language='coffeescript'></span><span class="hljs-reserved">var</span> output = encoder.compile(); 
</code></pre><p>Here, output is set to a Blob. In order to get a nice <span class="caps">URL</span> which you can use to stick in a <code>&amp;lt;video&amp;gt;</code> element, you need to send it over to<code>createObjectURL</code></p>
<pre><code><span style='display:none' detected-language='coffeescript'></span><span class="hljs-reserved">var</span> url = (<span class="hljs-built_in">window</span>.webkitURL || <span class="hljs-built_in">window</span>.<span class="caps">URL</span>).createObjectURL(output); 
</code></pre><p>And you’re done.&nbsp;Awesome.</p>
<h2 id="documentation">Documentation</h2>
<p><code>Weppy.fromImageArray(image[], fps)</code> this is a simple function that takes a list of DataURL encoded frames and returns a WebM video. Note that the images have to all be encoded with&nbsp;WebP.</p>
<p><code>new Weppy.Video(optional fps, optional quality)</code> this is the constructor for the main <span class="caps">API</span>. quality only applies if you’re sending in contexts or canvas objects and doesn’t matter if you’re sending in encoded&nbsp;stuff</p>
<p><code>.add(canvas or context or dataURL, optional duration)</code> if fps isn’t specified in the constructor, you can stick a duration (in milliseconds)&nbsp;here.</p>
<h2 id="todo">Todo</h2>
<p>This pretty much works as well as it possibly could at this point. Maybe one day it should support WebWorkers or something, but unlike the <span class="caps">GIF</span> Encoder, it doesn’t actually require much real computation. So doing that probably wouldn’t net any performance benefits, especially since it can stitch together a 120-frame animation in like 20 milliseconds&nbsp;already.</p>
<p>But one of the sad things about it is that now it uses Blobs instead of strings, which is great and all except that blobs are actually slower than strings because it still has to do the DataURL conversion from string to Blob. That’s pretty lame. Firefox supports the canvas toBlob thing, but for some reason Chrome doesn’t, but eventually it probably might, and that might be useful to&nbsp;add.</p>
<p>Also, if someone ever makes a Javascript Vorbis encoder, it would be nice to integrate that in, since this currently only does the video part, but audio’s also a pretty big&nbsp;part.</p>

            </section>
          </article>
          <hr>
          <article class="article intro">
            <header>
              <h2><a href="/2011/01/the-ambiguity-of-open-and-vp8-vs-h-264/">The Ambiguity of &quot;Open&quot; and VP8 vs. H.264</a> <span class="subtitle">13 January 2011</span></h2>
            </header>
            <section class="content"><p>Google has recently announced their intention to <a href="http://blog.chromium.org/2011/01/html-video-codec-support-in-chrome.html">remove the H.264</a> video codec from its Chrome browser. This decision has been smeared as an evil campaign for controlling video on the web, akin to <a href="http://en.wikipedia.org/wiki/Not_Invented_Here">not-invented-here</a> syndrome. It’s also been lauded as the push that the web needs to<a href="http://www.osnews.com/story/24245/10_Questions_for_John_Gruber_Regarding_H_264_WebM"> remain open </a>and free.<a href="http://daringfireball.net/2011/01/simple_questions"> Mostly, it’s been marked as inconsistent,</a> due to the bundling of Adobe’s proprietary Flash&nbsp;player.</p>
<p>Richard Stallman <a href="http://www.gnu.org/philosophy/open-source-misses-the-point.html">doesn’t like the term Open Source</a> because it fails to embody the true meaning of “free software”, and the one thing that’s worse is the word “open”. This debate can’t simply be labeled as one for or against openness (even ignoring the technical&nbsp;details).</p>
<p>H.264 is an open standard. It was developed by a committee, standardized, reviewed by many engineers and developers for multiple companies and has been standardized for use with a multitude of containers and devices. However, H.264 is not royalty free. Software patents in many countries restrict the distribution of software that utilizes the codec to those who pay the&nbsp;<span class="caps">MPEG</span>-LA.</p>
<p><span class="caps">VP8</span> is not a standard. It was developed secretly by a single company, and until recently, had only a single working implementation. The public wasn’t open to collaboration on the specification until the bitstream spec was frozen, including the bugs that existed within. Now, the source code and reference implementation are available under liberal licenses, and all the related patents are irrevocably&nbsp;royalty-free.</p>
<p>Adobe Flash, while not synonymous with a video codec (unless you mean .flv flash videos, which are either <span class="caps">VP6</span> or Sorenson Spark), is going here anyway because everyone feels like comparing it. Flash’s SWF format is not standard, but it is open. There are a few implementations (Swfdec, Gnash, GameSWF, Gordon, etc), but none of them are as complete as the official proprietary implementation. There’s a <a href="http://www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf">bitstream specification</a> that anyone can read to create an independent implementation of the player. Implementing and using the Flash player is still royalty-free (Since the Flash <span class="caps">VM</span> can decode H.264, obviously that part, not controlled by Adobe still has royalties), anyone can make software that can export SWF animations without paying&nbsp;Adobe.</p>
<h2 id="implementation-vs-distribution">Implementation vs.&nbsp;Distribution</h2>
<h4 id="or-how-bundling-flash-doesn-t-violate-the-novikov-self-consistency-principle-http-en-wikipedia-org-wiki-novikov_self-consistency_principle-">Or: How Bundling Flash doesn’t violate the <a href="http://en.wikipedia.org/wiki/Novikov_self-consistency_principle">Novikov self-consistency&nbsp;principle</a></h4>
<p><table></p>
<p><tbody></p>
<p><tr></p>
<p><th>Name</th></p>
<p><th>Standardization</th></p>
<p><th>Implementation</th></p>
<p><th>Distribution</th></p>
<p><th>Dev History</th>
</tr></p>
<p><tr></p>
<p><td><strong>Theora</strong></td></p>
<p><td style="background-color: #ffff00;">Standardized?</td></p>
<p><td style="background-color: #99cc00;">Open Source</td></p>
<p><td style="background-color: #99cc00;">Royalty Free</td></p>
<p><td style="background-color: #99cc00;">Mostly Open</td>
</tr></p>
<p><tr></p>
<p><td><strong><span class="caps">VP8</span></strong></td></p>
<p><td style="background-color: #ff9999;">Not Standardized</td></p>
<p><td style="background-color: #99cc00;">Open Source</td></p>
<p><td style="background-color: #99cc00;">Royalty Free</td></p>
<p><td style="background-color: #ffff00;">Mixed</td>
</tr></p>
<p><tr></p>
<p><td><strong>H.264</strong></td></p>
<p><td style="background-color: #99cc00;">Standardized</td></p>
<p><td style="background-color: #99cc00;">Open Source</td></p>
<p><td style="background-color: #ff9999;">Royalties</td></p>
<p><td style="background-color: #99cc00;">Open</td>
</tr></p>
<p><tr></p>
<p><td><strong>Flash*</strong></td></p>
<p><td style="background-color: #ff9999;">Not Standardized</td></p>
<p><td style="background-color: #ff9999;">Proprietary</td></p>
<p><td style="background-color: #99cc00;">Royalty Free</td></p>
<p><td style="background-color: #ff9999;">Proprietary</td>
</tr>
</tbody>
</table>
<em>* Adobe Flash isn’t a video&nbsp;codec</em></p>
<p>Each column of the chart can be treated as one part of “open”. The &lt;video&gt; debate now primarily concerns <span class="caps">VP8</span> and H.264, as Theora is inferior for technical reasons and Flash isn’t a video codec. I don’t know if Theora’s actually standardized, but it has multiple implementations and was developed by the Xiph.Org foundation, and is the closest thing to an actual standard, short of being a product of MPEG. Theora was created from On2’s VP3 code, but was changed significantly by the Xiph.org Foundation before release, so the development history can be considered mostly open. VP8 as announced, and the bitstream was frozen shortly afterwards, leaving little community involvement. For the years before its debut as part of WebM, the format was secret, patent encumbered, and proprietary. At least now, the source code is open and people are free to do whatever they please, but the open source video community probably had very little say in the development of the codec. H.264 has an open software reference implementation, as does VP8 and Theora. Flash’s de-facto implementation is Adobe’s, which is&nbsp;proprietary.</p>
<p>The one that concerns Mozilla, Opera and Google is the distribution rights; whether or not royalties have to be paid. Notably, this is where the parallel drawn by most critics of Google’s move with H.264 and Flash comes into question. Many people believe that Flash is the epitome of evil, and proprietary software, and embodies everything wrong with proprietary software. The distribution column is arguably the most important, and it’s the one that fundamentally determines whether or not something acts as a detriment to “open innovation”. Flash animations and applications can be created and distributed without paying royalty fees to Adobe, regardless of the viewership. Innovation is still permitted as long as the distribution is free (except with changing the inner workings of the proprietary&nbsp;implementation).</p>
<h2 id="the-ambiguity-of-plugin-">The Ambiguity of&nbsp;“Plugin”</h2>
<h4 id="todo-use-this-subtitle-to-mention-random-tangential-thoughts-"><span class="caps">TODO</span>: Use this subtitle to mention random tangential&nbsp;thoughts.</h4>
<p>It seems there are lots of misconceptions about WebM, and new ones as well, because of the use of the word “plugin” by Google in their “<a href="http://blog.chromium.org/2011/01/more-about-chrome-html-video-codec.html">More about Chrome <span class="caps">HTML</span> Codec Change</a>“. Here’s what the relevant part of the post says (it’s buried into the last&nbsp;paragraph).</p>
<blockquote>
<p>This is why we’re joining others in the community to invest in WebM and encouraging every browser vendor to adopt it for the emerging <span class="caps">HTML</span> video platform (the WebM Project team will <strong>soon release plugins</strong> that enable WebM support in Safari and <span class="caps">IE9</span> via the HTML standard &lt;video&gt; tag).
Microsoft and Apple through IE9 and Safari, respectively, rely on the underlying operating system’s multimedia frameworks to handle &lt;video&gt; decoding. Chrome and Chromium bundle a customized version of the ffmpeg framework, while Opera uses gstreamer and Firefox has its own framework built on various open source codec&nbsp;libraries.</p>
<p><table></p>
<p><tbody></p>
<p><tr></p>
<p><th>Browser</th></p>
<p><th>WebM</th></p>
<p><th>H.264</th></p>
<p><th>Theora</th></p>
<p><th>Anything Imaginable</th>
</tr></p>
<p><tr></p>
<p><td><strong>Firefox</strong></td></p>
<p><td style="background-color: #99cc00;">Version 4</td></p>
<p><td style="background-color: #ff9999;">Never</td></p>
<p><td style="background-color: #99cc00;">Version 3.5</td></p>
<p><td style="background-color: #ff9999;">Never</td>
</tr></p>
<p><tr></p>
<p><td><strong>Chrome</strong></td></p>
<p><td style="background-color: #99cc00;">Version 6</td></p>
<p><td style="background-color: #ff9999;">Removed in Version 10</td></p>
<p><td style="background-color: #99cc00;">Version 3</td></p>
<p><td style="background-color: #ff9999;">Never</td>
</tr></p>
<p><tr></p>
<p><td><strong>Opera</strong></td></p>
<p><td style="background-color: #99cc00;">Version 10.60</td></p>
<p><td style="background-color: #ff9999;">Never</td></p>
<p><td style="background-color: #99cc00;">Version 10.50</td></p>
<p><td style="background-color: #ff9999;">Never</td>
</tr></p>
<p><tr></p>
<p><td><strong>Safari</strong></td></p>
<p><td style="background-color: #ffff00;">QuickTime</td></p>
<p><td style="background-color: #99cc00;">Default QuickTime</td></p>
<p><td style="background-color: #ffff00;">QuickTime</td></p>
<p><td style="background-color: #99cc00;">Default QuickTime*</td>
</tr></p>
<p><tr></p>
<p><td><strong><span class="caps">IE9</span></strong></td></p>
<p><td style="background-color: #ffff00;">Windows Media</td></p>
<p><td style="background-color: #99cc00;">Default Windows Media</td></p>
<p><td style="background-color: #ffff00;">Windows Media</td></p>
<p><td style="background-color: #99cc00;">Default Windows Media<em></td>
</tr>
</tbody>
</table>
_</em> Well, not really <em>anything</em> imaginable, but a lot of&nbsp;them_</p>
</blockquote>
<p>QuickTime and Windows Media are pluggable multimedia frameworks. And since Safari and <span class="caps">IE9</span> use them for &lt;video&gt; support, any codec or container format supported by the respective frameworks, works in the browser. For QuickTime, the list for videos goes along the lines of 3GP, Apple Video, AVI, DV, Cinepak, H.261, H.262, H.263, H.264, Microsoft Video 1, MPEG-1, MPEG-4 Part 2, Motion JPEG, Pixlet, Planar RGB, Sorenson Video, Qtch, QuickTime Movie, and QuickTime VR. But these media frameworks are <em>pluggable</em>, which means they play whatever codecs are installed. It just happens that those codecs listed above are plugins that are installed <em>by default</em>, somewhat analogous to how Google Chrome bundles Flash. The plugin frameworks for multimedia don’t treat plugins <em>any</em> different from “native” codecs. There’s absolutely no way to tell the difference from a user perspective. Right clicking a video will give you the same ordinary context&nbsp;menu.</p>
<p>Codec packs are often installed by users anyway. A codec pack consists of a set of plugins for the operating system’s multimedia framework. Once one of those codecs are installed to the system, support is available to the applications that rely on the <span class="caps">OS</span>’s framework: QuickTime Player, Windows Media Player, IE9 and&nbsp;Safari.</p>
<p>Notably absent are the Opera, Chrome and Firefox browsers that ignore whatever is installed, to use their own bundled decoders. There’s a reason for this, and it’s pretty easy to spot. Firefox, Chrome and Opera are also the only ones on the list that aren’t tied to a specific operating system, and bundling your own media framework lets you keep the functionality consistent. <span class="caps">IE</span> and Safari aren’t cross platform. Well, Safari works on Windows, but it still requires QuickTime for Windows to be installed to play the video&nbsp;content.</p>
<p>You also don’t want all the other video codecs thrown into the mix. Standards are about <em>standardization</em>, where you have a limited number of codecs instead of an entire forest of them. This brings us to a bit of <em>History</em>, I’ll begin with the olden days. I can’t tell you too much, as much of the first section happened when I was 6 years old- and certainly wasn’t into the negative user experience of platform-specific multimedia&nbsp;plugins.</p>
<h2 id="a-brief-history-of-stuff-named-a-brief-history-">A Brief History of Stuff Named “A Brief&nbsp;History…”</h2>
<h4 id="uh-i-mean-video-on-the-web-">Uh… I mean, Video on the&nbsp;Web.</h4>
<p>Before the popularity of <span class="caps">HTML5</span> Video, or event Flash, video was viewed on the web using the RealVideo, MPlayer, VLC, Windows Media Player, and Quicktime <em>Plugins</em>. Note that pretty little plugins aren’t plugins to the underlying multimedia frameworks: these are the nasty type of plugins that Flash is among. They’re the plugins that take a long time to load, have interfaces that never look like the surrounding page or browser, only work on certain operating systems, at best, inconsistently. This is the epitome of what standardization is meant to prevent, and the distillation of everything that’s wrong with plugin based&nbsp;video.</p>
<p>Flash’s popularity (probably thanks to YouTube), brought a semblance of <em>standardization</em> to the industry. Video on the web was delivered through the flv container, encoded either with Sorenson Spark or, in later versions of Flash, On2’s <span class="caps">VP6</span>. A while later, H.264/AVC which was later added to Flash, and as the superior codec, most people switched to that and FLV is slowly fading&nbsp;away.</p>
<p><span class="caps">HTML5</span> video became popular recently. I’ll say it’s probably because of iOS, since that’s the only way to get web video to play there and the rest of the aggressive marketing that Apple does. This brings us to <em>today </em>(or at least the general time period of early January 2011 in which I’m writing this post in). Google has just announced it’s intention to remove H.264 from an upcoming revision of the Chrome browser (much like how the Chromium browser <em>never</em> supported H.264). And everyone on the internet that cares enough to say a word is going insane. Which brings us back to the last section, about how Safari and <span class="caps">IE9</span> use the operating system’s underlying multimedia frameworks and how all the other browsers (Firefox/Chrome/Opera) that work on my beloved operating system (Linux) bundle their&nbsp;own.</p>
<p>If Firefox, Chrome and Opera used the <span class="caps">OS</span>’s media frameworks, we would be set back into the dark ages when people used every video codec imaginable and nobody would be happy. Standards exist for <em>consistency</em>, and it would be terrible if people started to go on a cost saving measure to never again transcode video, and serve it straight from the server’s filesystem as <span class="caps">AVI</span> files containing DV or god forbid MJPEG (the same format the users’s uploaded!) because all the Safaris and IE9s could play it fine. The fact Firefox, Chrome and Opera bundle their own multimedia frameworks forbids the possibility of this, because those browsers (in the forseeable future) will <em>never</em> support anything other than WebM, Theora and potentially&nbsp;H.264.</p>
<h2 id="there-s-more-to-h-264-than-just-h-264">There’s more to H.264 than just&nbsp;H.264</h2>
<h4 id="this-part-doesn-t-make-much-sense-">This part doesn’t make much&nbsp;sense.</h4>
<p>Often, the argument against <span class="caps">VP8</span> is that it’s inferior to the H.264 codec, and to me, this seems like the most ideologically valid concern. But in a lot of cases, it stems from a misunderstanding of how H.264 works. H.264 is not a single video codec (not even to mention multimedia container formats), but rather has several <em>Profiles</em> that work on different devices and implementations. Rarely are videos encoded only in <span class="caps">MPEG</span>-4/AVC H.264 Extended Profile at 1080p and 60fps. Go on the Apple store and you’ll see that every iPod device you can find (including the iPhone), includes what video codecs are supported. And it doesn’t just say H.264, but rather, something much more wordy&nbsp;like</p>
<blockquote>
<p>Video formats supported: H.264 video up to 720p, 30 frames per second, Main Profile level 3.1 with <span class="caps">AAC</span>-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats
For the insanely great <a href="http://www.apple.com/iphone/specs.html">iPhone 4</a>. Google is meaner and doesn’t make the information about profile support on the Nexus S quite as accessible (though it’s not the only reason I’m an iPhone user), but it should be safe to assume it’s something along the lines of what the iPhone 4 supports. The<a href="http://www.apple.com/ipodclassic/specs.html"> iPod Classic</a> has a nice, even longer string, that represents even less support for H.264:
H.264 video, up to 1.5 Mbps, 640 by 480 pixels, 30 frames per second, Low-Complexity version of the H.264 Baseline Profile with <span class="caps">AAC</span>-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats; H.264 video, up to 2.5 Mbps, 640 by 480 pixels, 30 frames per second, Baseline Profile up to Level 3.0 with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats;
This is because very few devices can actually utilize all the great features that H.264 defines. Wikipedia has <a href="http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC#Profiles">a nice pretty chart</a>. So the point of all of this is to say, even though <span class="caps">VP8</span> is inferior to H.264 from a purely technical standpoint, you probably can’t just use the Main or Extended profiles to support all the devices that “support H.264”. Does this invalidate the inferiority argument? Nope. Dark Shikari <a href="http://x264dev.multimedia.cx/archives/377">said</a> “I expect <span class="caps">VP8</span> to be more comparable to VC-1 or H.264 Baseline Profile than with H.264”. But the large number of devices that support H.264 might actually only support the baseline&nbsp;profiles.</p>
</blockquote>
<h2 id="my-hopeless-ideals">My Hopeless&nbsp;Ideals</h2>
<h4 id="better-be-blunt-with-what-will-probably-never-happen-">Better be blunt with what will probably never&nbsp;happen.</h4>
<p><span class="caps">VP8</span> is a bit worse than H.264, and had it been a patent encumbered video format, there would be almost no reason to prefer it over AVC. The &lt;video&gt; part of the HTML5 specification&nbsp;states:</p>
<blockquote>
<p>It would be <strong>helpful for interoperability if </strong>all browsers could support the same codecs. However, there are no known codecs that satisfy all the current players: <strong>we need a codec that is known to not require per-unit or per-distributor licensing</strong>, that is <strong>compatible with the open source</strong> development model, that is of <strong>sufficient quality</strong> as to be usable, and that is not an additional <strong>submarine patent</strong> risk for large companies. This is an ongoing issue and this section will be updated once more information is available
The only major codecs that are royalty free are Theora and <span class="caps">VP8</span>, and the former probably isn’t of sufficient quality. Both of them come with patent risks (or at least that’s what MPEG-LA wants people to believe), leaving a set of zero acceptable codecs. For this to work at all, something needs to be&nbsp;compromised.</p>
</blockquote>
<p>H.264 defines a baseline profile that all decoders could be reasonably expected to handle. Such a profile exists so that the video can be viewed, albeit with inferior compression on a variety of devices and platforms with limited computational ability. The internet was built on interoperability, and <span class="caps">HTML5</span> needs an equivalent “baseline codec” for the web. Something that compresses video at sufficient, though not bleeding-edge quality. Something that can be implemented and distributed openly on all&nbsp;platforms.</p>
<p>For <span class="caps">HTML5</span> &lt;audio&gt;, nearly all browsers implement the basic WAV codec. It serves as an acceptable baseline for small snippets of audio to be played in a cross-brower manner. It’s usually uncompressed, and for most applications, inferior to MP3 and Vorbis. &lt;video&gt; needs similar treatment. That niche is, at this time, best filled by WebM/VP8. If Apple and Microsoft were to add support for the WebM format, it would only improve the environment for open innovation. H.264 can be considered the “bleeding-edge” codec, heck, they could even add HEVC/H.265 to set off an environment of useful competition (or not). But a “baseline codec” should be established first. Something that publishers can encode their videos in, so that any modern browser can&nbsp;view.</p>
<p>Right now, the discussion has been polarized between free software advocates who often seek to eradicate proprietary or patent-encumbered ideas from the face of reality and those who hold a disregard for the open source values. This way of thinking, and of treating innovation is profoundly dangerous for both the free software community and the patent-creators. The free software community can not afford to be constantly twenty years behind the times in terms of innovation (especially if you subscribe to the law of accelerating returns), and the patent-creators can’t afford for the free software community to involved in actively foiling their innovations. It’s truly great what <span class="caps">MPEG</span> has done, and it’s terrible that such a controversy exists around its adoption. The best scenario would be for MPEG or the ISO standards bodies to eliminate royalties. The fact multiple industries can agree upon a single, high quality, interoperable codec should be enough of a market and innovation advantage to waive the relatively nominal money from&nbsp;licensing.</p>
<p>Will this actually happen? I doubt it. Apple seems firmly invested in the success of H.264. Microsoft may be more willing to add <span class="caps">VP8</span> support if and when the format gains popularity (and especially if Google adds patent indemnification just so they can see a lawsuit made). Mozilla will likely never compromise on principle and Opera might add AVC one day. Given the huge backlash, Google’s the most likely to revert its opinion and add AVC back into Chrome in a future release. Yay for hopeless idealism! And since I’m espousing hypothetical and impossible ideas anyway, why not vouch for reform of the U.S. patent system as well? If you think of it, the fact it’s such a controversy and that people need to use an inferior product in order to innovate, that smacks in the face of the very Article 1, Section 8, Clause 8 of the United States&nbsp;Constitution:</p>
<blockquote>
<p>To promote the Progress of Science and useful Arts, by securing for limited Times to Authors and Inventors the exclusive Right to their respective Writings and Discoveries.
And this ends what may be the longest blog post I’ve ever written, revised three times. If you’ve actually read this through, please consider commenting or sending me a tweet at <a href="http://twitter.com/antimatter15">@antimatter15</a> (or following me, that would be great!). Also, if I’m misinformed, please inform me and I <em>might</em> revise this yet&nbsp;again.</p>
</blockquote>

            </section>
          </article>
          <hr>
          <article class="article intro">
            <header>
              <h2><a href="/2010/10/weppy-updates-opera-chrome-and-firefox-support-and-simpler-usage/">Weppy Updates Opera, Chrome and Firefox support and simpler usage</a> <span class="subtitle">09 October 2010</span></h2>
            </header>
            <section class="content"><p><a href="/articles/2010/Weppy%20Updates%20Opera,%20Chrome%20and%20Firefox%20support%20and%20simpler%20usage/Screenshot-19.png"><div class="pic md" style="" ><img src="/articles/2010/Weppy%20Updates%20Opera,%20Chrome%20and%20Firefox%20support%20and%20simpler%20usage/Screenshot-19.png" alt="" ><div class="caption">Screenshot-19</div></div></a></p>
<p>With help from <a href="http://twitter.com/Frenzie">@Frenzie</a> and <a href="http://twitter.com/#!/paul_irish/status/26829179917">@paul_irish</a>, the latest not-yet-versioned release of Weppy, my Javascript WebP to WebM conversion library, or something of a <a href="http://remysharp.com/2010/10/08/what-is-a-polyfill/">polyfill</a> for a format that is yet to be part of any specification (<a href="http://dev.w3.org/html5/spec/Overview.html#attr-img-src"><span class="caps">HTML5</span> seems to specifically reference</a> the image src attribute are examples such as <span class="caps">PNG</span>, GIF, JPEG, APNG, PDF, XML, SVG, SMIL, and MNG). The new release brings some awesome new features that really don’t change much and shouldn’t really be used in the real world because most browsers in the world still aren’t Firefox, Chrome or Opera - that is, a large portion of the browser market includes browsers like Safari and IE, either suffering from antiquity (IE6! aah!) or just liking h264 (IE9 +&nbsp;Safari).</p>
<p>The new release supports Opera. I never bothered debugging Opera, I figured it was another huge issue that would demand a rewrite (as supporting Firefox had needed, because the order of the object keys isn’t preserved and breaks the <span class="caps">EBML</span> result, or at least for Firefox’s parser which seems to be somewhat stricter than Chrome’s, is that ffmpeg?). And after premature optimization (stripping “unnecessary” EBML tags), my code didn’t work in chrome, so I had to revert to an earlier revision. All my testing code was based on file drag-drop stuff, and Opera doesn’t support that. Until I saw this <a href="http://forums.mozillazine.org/viewtopic.php?p=9991409#p9991409">mozillazine topic</a>, I didn’t care, but it was a lot easier to fix than I&nbsp;feared.</p>
<p>Part of the solution was getting rid of the canvas stage. Admittedly, the canvas stage was pretty useless once the toDataURL() stage was removed before the first public release, but I didn’t feel like deleting code, so it stayed there. Also, I noticed that the global variable that gets introduced was accidentally named “WebM”, which is wrong, it should be “WebP”, but because of the uncreative format naming and similarities, I didn’t notice. Not sure, but it seems to be more stable&nbsp;now.</p>
<p>Chrome probably will add WebP soon, and it needs to be future proof, detecting whether or not a browser supports the WebP format. To do that, it creates an Image, sets the src to a data url of a 4x4 webp image and listens to the onload and onerror events, checking if the size is correct and there were no errors loading it. The routine is expected to error and totally untested as there aren’t any browsers that support the feature yet for me to&nbsp;try.</p>
<p>Another change, is that by default, it will automatically load all the same-origin (because of the limitations of <span class="caps">XHR</span>) webp images (from &lt;img&gt; tags), on the DOMContentLoaded event, so the library is practically drop-in now. In any web page, you can pretty much add &lt;script src=”<a href="http://antimatter15.github.com/weppy/weppy.js">http://antimatter15.github.com/weppy/weppy.js</a>“&gt;&lt;/script&gt; and on the supported browsers, it should automatically load and replace all WebP images, though not something I would really&nbsp;recommended.</p>
<p>The demo is the same place it always was: <a href="http://antimatter15.github.com/weppy/demo.html">http://antimatter15.github.com/weppy/demo.html</a></p>
<p>There is also this nifty hack that uses &lt;canvas&gt; to add an alpha channel to the WebP image (adapted from the <a href="http://blog.jackadam.net/2010/alpha-jpegs/">original <span class="caps">JPEG</span></a> one): <a href="http://antimatter15.github.com/weppy/alpha/alpha.html">http://antimatter15.github.com/weppy/alpha/alpha.html</a></p>
<p>Also, please follow me<a href="http://twitter.com/antimatter15"> on twitter</a>.</p>

            </section>
          </article>
          <hr>
          <article class="article intro">
            <header>
              <h2><a href="/2010/10/weppy-javascript-shim-for-webp-on-chrome-6-and-firefox-4-0/">Weppy Javascript Shim for WebP on Chrome 6 and Firefox 4.0</a> <span class="subtitle">03 October 2010</span></h2>
            </header>
            <section class="content"><p><a href="http://antimatter15.github.com/weppy/demo.html"><div class="pic md" style="" ><img src="/articles/2010/Weppy%20Javascript%20Shim%20for%20WebP%20on%20Chrome%206%20and%20Firefox%204.0/Screenshot-14.png" alt="" ><div class="caption">Screenshot-14</div></div></a></p>
<p><strong>WebP </strong><a href="http://code.google.com/speed/webp/">http://code.google.com/speed/webp/</a></p>
<p>Recently, Google announced a new lossy image compression codec, named WebP, intended to supersede <span class="caps">JPEG</span>. It is based on VP8’s intraframe compression algorithm. It’s not natively supported in any browsers yet. Weppy is a compatibility layer that changes WebP files into WebM files that can be loaded on several modern&nbsp;browsers.</p>
<p><strong>How does it&nbsp;work?</strong></p>
<p>WebP is actually a lightweight container for a single <span class="caps">VP8</span> frame (whereas WebM is a container based off Matroska meant for video). WebM support exists already in Chrome, Firefox and Opera, so all that’s needed to render it is to do a little magic to convert the RIFF encoded WebP image into a EBML/Matroska encoded single frame WebM video, loading it in a , using drawImage() on a  and replacing the .webp image with the data URL extracted from the  using toDataURL().
<strong>&nbsp;Issues</strong></p>
<ul>
<li>Chrome (on linux anyway) tends to crash a&nbsp;lot.</li>
<li>Firefox throws a security exception when doing toDataURL() on a canvas after drawImage() of a video loaded from a data url. The hack being used it to replace the image node with the actual canvas&nbsp;instance.</li>
<li>Opera doesn’t work. I don’t really have the time to investigate.
<strong> What&nbsp;Browsers?</strong></li>
</ul>
<p>Chrome 7.0 and Firefox 4.0 were both tested. Opera doesn’t work for reasons that I’m not sure about. I would appreciate it if someone fixes it and submits a patch&nbsp;:)</p>
<p><strong>Demo</strong></p>
<p><a href="http://antimatter15.github.com/weppy/demo.html">http://antimatter15.github.com/weppy/demo.html</a></p>

            </section>
          </article>
          <hr>
          <div class="nav"><a href="/archive" class="newer">« Archives</a><a href="/page/1" class="next">Latest Posts »</a>
          </div>
        </div>
      </div>
    </div>
    <script>
      function squish(){
        document.getElementById("squishfoot").className += "squish"
      }
    </script>
    <style>
      .squish { font-size: 9px }
      .squishsquish { font-size: 8px }
      .squishsquishsquish { font-size: 7px }
      .squishsquishsquishsquish { font-size: 6px }
      .squishsquishsquishsquishsquish { font-size: 5px }
      .squishsquishsquishsquishsquishsquish { font-size: 4px }
      .squishsquishsquishsquishsquishsquishsquish { visibility: hidden }
    </style>
    <div class="graybar bottom">
      <footer>
        <div id="squishfoot">I'm a tiny footer, please don't <a href="javascript:squish()">squish</a> me</div>
      </footer>
    </div>
  </body>
</html>